<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>ECE 5160 Shuchang Wen</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Bootstrap Icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic" rel="stylesheet" type="text/css" />
        <!-- SimpleLightbox plugin CSS-->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <!-- code highlight -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
        <!-- and it's easy to individually load additional languages -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/go.min.js"></script>
        <script>hljs.highlightAll();</script>






    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" id="mainNav">
            <div class="container px-4 px-lg-5">
                <a class="navbar-brand" href="#page-top">Shuchang Wen ECE 5160</a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto my-2 my-lg-0">
                        <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                        <li class="nav-item"><a class="nav-link" href="#portfolio">Projects</a></li>
                        <!-- <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li> -->
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead">
            <div class="container px-4 px-lg-5 h-100">
                <div class="row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center">
                    <div class="col-lg-8 align-self-end">
                        <h1 class="text-white font-weight-bold">ECE 5160: Fast Robots</h1>
                        <hr class="divider" />
                    </div>
                    <div class="col-lg-8 align-self-baseline">
                        <p class="text-white-75 mb-5">This web serves to document lab projects in ECE 5160 (Spring 2025).</p>
                        <a class="btn btn-primary btn-xl" href="#about">Find Out More</a>
                    </div>
                </div>
            </div>
        </header>
        <!-- About-->
        <section class="page-section bg-primary" id="about">
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-lg-8 text-center">
                        <img src="assets/img/photo.jpg" class="img-fluid rounded-circle mb-4" alt="Shuchang Wen" width="200">
                        <h2 class="text-white mt-0">ABOUT</h2>
                        <hr class="divider divider-light" />
                        <p class="text-white-75 mb-4">Hello! I’m Shuchang Wen (温书畅), currently an MEng student in Cornell’s ECE program. Welcome to my ECE 5160 project website, where I’ll document how I tackled each lab and ultimately built a fast, autonomous robot for the course “Fast Robots.” Here, you’ll find my reports, insights, and step-by-step progress as I explore sensor integration, dynamic controls, and the balance between on-board and off-board computation. I hope this site serves as both a personal portfolio and a resource for anyone excited about designing and implementing high-speed autonomous systems.</p>
                        <a class="btn btn-light btn-xl" href="#services">Get Started!</a>
                    </div>
                </div>
            </div>
        </section>
        <!-- Services-->
        <!-- <section class="page-section" id="services">
            <div class="container px-4 px-lg-5">
                <h2 class="text-center mt-0">At Your Service</h2>
                <hr class="divider" />
                <div class="row gx-4 gx-lg-5">
                    <div class="col-lg-3 col-md-6 text-center">
                        <div class="mt-5">
                            <div class="mb-2"><i class="bi-gem fs-1 text-primary"></i></div>
                            <h3 class="h4 mb-2">Sturdy Themes</h3>
                            <p class="text-muted mb-0">Our themes are updated regularly to keep them bug free!</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 text-center">
                        <div class="mt-5">
                            <div class="mb-2"><i class="bi-laptop fs-1 text-primary"></i></div>
                            <h3 class="h4 mb-2">Up to Date</h3>
                            <p class="text-muted mb-0">All dependencies are kept current to keep things fresh.</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 text-center">
                        <div class="mt-5">
                            <div class="mb-2"><i class="bi-globe fs-1 text-primary"></i></div>
                            <h3 class="h4 mb-2">Ready to Publish</h3>
                            <p class="text-muted mb-0">You can use this design as is, or you can make changes!</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 text-center">
                        <div class="mt-5">
                            <div class="mb-2"><i class="bi-heart fs-1 text-primary"></i></div>
                            <h3 class="h4 mb-2">Made with Love</h3>
                            <p class="text-muted mb-0">Is it really open source if it's not made with love?</p>
                        </div>
                    </div>
                </div>
            </div>
        </section> -->
        <!-- Portfolio-->
        <div id="portfolio">
            <div class="container-fluid p-0">
                <div class="row g-0">
                    <div class="col-lg-4 col-sm-6">
                        <a class="portfolio-box" data-bs-toggle="modal" data-bs-target="#lab1Modal">
                            <img class="img-fluid" src="assets/img/portfolio/thumbnails/pic1.png" alt="..." />
                            <div class="portfolio-box-caption">
                                <div class="project-category text-white-50">LAB 1</div>
                                <div class="project-name">The Artemis board and Bluetooth</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-lg-4 col-sm-6">
                        <a class="portfolio-box" data-bs-toggle="modal" data-bs-target="#lab2Modal">
                            <img class="img-fluid" src="assets/img/portfolio/thumbnails/pic2.jpg" alt="..." />
                            <div class="portfolio-box-caption">
                                <div class="project-category text-white-50">LAB 2</div>
                                <div class="project-name">IMU</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-lg-4 col-sm-6">
                        <a class="portfolio-box" data-bs-toggle="modal" data-bs-target="#lab3Modal">
                            <img class="img-fluid" src="assets/img/portfolio/thumbnails/pic3.png" alt="..." />
                            <div class="portfolio-box-caption">
                                <div class="project-category text-white-50">Lab 3</div>
                                <div class="project-name">Time of Flight Sensors</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-lg-4 col-sm-6">
                        <a class="portfolio-box" data-bs-toggle="modal" data-bs-target="#lab4Modal">
                            <img class="img-fluid" src="assets/img/portfolio/thumbnails/pic4.jpg" alt="..." />
                            <div class="portfolio-box-caption">
                                <div class="project-category text-white-50">Lab 4</div>
                                <div class="project-name">Motors and Open Loop Control</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-lg-4 col-sm-6">
                        <a class="portfolio-box" data-bs-toggle="modal" data-bs-target="#lab5Modal">
                            <img class="img-fluid" src="assets/img/portfolio/thumbnails/pic5.png" alt="..." />
                            <div class="portfolio-box-caption">
                                <div class="project-category text-white-50">Lab 5</div>
                                <div class="project-name">Linear PID control and Linear interpolation</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-lg-4 col-sm-6">
                        <a class="portfolio-box" data-bs-toggle="modal" data-bs-target="#lab6Modal">
                            <img class="img-fluid" src="assets/img/portfolio/thumbnails/pic5.png" alt="..." />
                            <div class="portfolio-box-caption p-3">
                                <div class="project-category text-white-50">Lab 6</div>
                                <div class="project-name">Orientation Control</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-lg-4 col-sm-6">
                        <a class="portfolio-box" data-bs-toggle="modal" data-bs-target="#lab7Modal">
                            <img class="img-fluid" src="assets/img/portfolio/thumbnails/pic7.png" alt="..." />
                            <div class="portfolio-box-caption">
                                <div class="project-category text-white-50">Lab 7</div>
                                <div class="project-name">Kalman filter</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-lg-4 col-sm-6">
                        <a class="portfolio-box" data-bs-toggle="modal" data-bs-target="#lab8Modal">
                            <img class="img-fluid" src="assets/img/portfolio/thumbnails/pic8.png" alt="..." />
                            <div class="portfolio-box-caption">
                                <div class="project-category text-white-50">Lab 8</div>
                                <div class="project-name">Stunts!</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-lg-4 col-sm-6">
                        <a class="portfolio-box" data-bs-toggle="modal" data-bs-target="#lab9Modal">
                            <img class="img-fluid" src="assets/img/portfolio/thumbnails/pic9.jpeg" alt="..." />
                            <div class="portfolio-box-caption">
                                <div class="project-category text-white-50">Lab 9</div>
                                <div class="project-name">Mapping</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-lg-4 col-sm-6">
                        <a class="portfolio-box" data-bs-toggle="modal" data-bs-target="#lab10Modal">
                            <img class="img-fluid" src="assets/img/portfolio/thumbnails/pic10.png" alt="..." />
                            <div class="portfolio-box-caption">
                                <div class="project-category text-white-50">Lab 10</div>
                                <div class="project-name">Grid Localization using Bayes Filter</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-lg-4 col-sm-6">
                        <a class="portfolio-box" data-bs-toggle="modal" data-bs-target="#lab11Modal">
                            <img class="img-fluid" src="assets/img/portfolio/thumbnails/pic11.png" alt="..." />
                            <div class="portfolio-box-caption">
                                <div class="project-category text-white-50">Lab 11</div>
                                <div class="project-name">Localization on the real robot</div>
                            </div>
                        </a>
                    </div>
                    <div class="col-lg-4 col-sm-6">
                        <a class="portfolio-box" data-bs-toggle="modal" data-bs-target="#lab1Modal">
                            <img class="img-fluid" src="assets/img/portfolio/thumbnails/1.jpg" alt="..." />
                            <div class="portfolio-box-caption">
                                <div class="project-category text-white-50">Category</div>
                                <div class="project-name">Project Name</div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- Call to action-->
        <!-- <section class="page-section bg-dark text-white">
            <div class="container px-4 px-lg-5 text-center">
                <h2 class="mb-4">Free Download at Start Bootstrap!</h2>
                <a class="btn btn-light btn-xl" href="https://startbootstrap.com/theme/creative/">Download Now!</a>
            </div>
        </section> -->
        <!-- Contact-->


                <!-- Here is the code for LAB 1 report -->
        <div class="modal fade" id="lab1Modal" tabindex="-1" aria-labelledby="lab1ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content border-0 shadow">

                    <!-- Modal 头部 -->
                    <div class="modal-header bg-light">
                        <h5 class="modal-title fw-bold" id="lab1ModalLabel">Lab 1 Report</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <!-- Modal 主体：通过 p-4 增加内边距，max-height: 80vh 和 overflow-y: auto 用于可滚动 -->
                    <div class="modal-body p-4" style="max-height: 80vh; overflow-y: auto;">

                        <!-- 可以在内部再包一层容器，便于统一排版 -->
                        <div class="container-fluid">

                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Lab 1: The Artemis board and Bluetooth</h2>
                            <p class="text-justify">
                                The main goal of LAB 1 is to set up and familiarize myself with the Arduino IDE and the Artemis development board.
                            </p>
                            <p class="text-justify">
                                In <strong>Lab 1A</strong>, I programmed the development board, experimented with controlling the onboard LED, read and wrote serial messages via USB, and utilized the onboard temperature sensor and pulse density microphone. Additionally, I completed the additional tasks for 5000-level students.
                            </p>
                            <p class="text-justify">
                                In <strong>Lab 1B</strong>, I built communication between the computer and the Artemis board via Bluetooth.
                                Also, I implemented the ECHO command, SEND_THREE_FLOATS command, GET_TIME_MILLIS command, and a total of eight tasks. Additionally, I analyzed the communication performance.
                            </p>
                            <!-- 图片示例区域 -->
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                
                                <!-- 第一张图片（Artemis Nano） -->
                                <div class="col-sm-6 col-md-4">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab1/ArtemisNano.png" 
                                        alt="Artemis Nano" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                            
                                <!-- 第二张图片（Type-C Cables） -->
                                <div class="col-sm-6 col-md-4">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab1/USB.png"
                                        alt="USB Type-C Cables" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                                
                                </div>
                                
                                <!-- 图片下方的文字说明 -->
                                <p class="text-center mt-3">
                                Parts Required: 1 x SparkFun RedBoard Artemis Nano and 1 x USB cable
                                </p>
                            </div>
                            

                            <hr class="my-4"/><!-- 分割线 -->
                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Lab 1A part</h2>
                            <h4 class="text-center mb-4">Prelab</h4>
                            <p class="text-justify">
                                In the prelab, I downloaded and installed the latest Arduino IDE. 
                                I also added the 
                                <a href="https://learn.sparkfun.com/tutorials/artemis-development-with-the-arduino-ide/setting-up-the-arduino-ide" target="_blank">
                                    JSON link
                                </a> 
                                to the Arduino settings (as shown in the image below).
                            </p>
                            <!-- 图片区容器 -->                       
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-12">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab1/lab1a/prelab.png" 
                                            alt="Artemis Nano" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                            <h4 class="text-center mb-4">Task1</h4>
                            <p>

                                In Task 1, I connected the Artemis development board to my computer and selected the correct board and port in the Arduino IDE.

                            </p>
                            <p>
                                However, I found that two ports with the name RedBoard Artemis Nano appeared. To enable data transmission via USB, we need to select the first port (/dev/cu.usbserial-120).
                            </p>
                            </p>
                            
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                  <!-- 在中等及以上屏幕占 8/12，居中显示 -->
                                  <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab1/lab1a/port.png" 
                                           class="img-fluid rounded" 
                                           style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                </div>
                              </div>                              
                            
                            
                            <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                            <h4 class="text-center mb-4">Task2: Testing Blink</h4>
                            <p>

                                In Task 2, I uploaded the 01.Basics code to my Artemis board and ran it. The process completed without any errors, and the blue LED on the Artemis started blinking, indicating that the board model and port I selected in the prelab were correct.

                            </p>
                            <p>
                                Then, I changed the delay in the code from 1000 to 500, uploaded it again, and observed that the blue LED on the Artemis blinked faster.
                            </p>
                            <div class="ratio ratio-16x9 mb-3">
                                <iframe
                                  src="https://www.youtube.com/embed/uAaCQfrzwYk"
                                  title="YouTube video"
                                  allowfullscreen>
                                </iframe>
                              </div>
                              
                              
                            <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                            <h4 class="text-center mb-4">Task3: Testing Example4_Serial</h4>
                            <p>
                                In Task 3, I uploaded and ran the Example4_Serial code on my Artemis board. The process completed without any errors. However, when I checked the serial monitor, I noticed <strong>garbled text</strong>.
                            </p>                            
                            
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                  <div class="col-md-12">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab1/lab1a/T3.png" 
                                           class="img-fluid rounded" 
                                           style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                </div>
                            </div>    
                            
                            <p>
                                I realized that the <strong>baud rate</strong> in Example4_Serial was set to <strong>9600</strong>, while the serial monitor was set to <strong>38400</strong>, causing a mismatch—essentially, "the Artemis was speaking a language my computer couldn't understand." After setting both baud rates to the same value, everything worked correctly.
                            </p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                  <div class="col-md-12">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab1/lab1a/T3success.png" 
                                           class="img-fluid rounded" 
                                           style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                </div>
                            </div>    
    

                            <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                            <h4 class="text-center mb-4">Task4: Testing temperature sensor</h4>
                            <p>
                                In Task 4, I uploaded the Example2_analogRead code to the Artemis board. I tried blowing air onto the Artemis, and I observed that the temperature values in the output increased accordingly.
                            </p>                            
                            <p>
                                I also try to use <strong>getTempDegF() Function</strong> to get the die temperature in deg F. Below is a screenshot of the serial monitor output while running the code.
                            </p>
                            
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                  <div class="col-md-12">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab1/lab1a/T4.png" 
                                           class="img-fluid rounded" 
                                           style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                </div>
                            </div> 
                            
                            <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                            <h4 class="text-center mb-4">Task5: Testing microphone</h4>
                            <p>
                                In Task 5, I tested the microphone on the Artemis board using the Example1_MicrophoneOutput code.
                            </p>
                            
                            <div class="ratio ratio-16x9 mb-3">
                                <iframe
                                  src="https://www.youtube.com/embed/MoO7SMZ1o8g"
                                  title="YouTube video"
                                  allowfullscreen>
                                </iframe>
                              </div>
                              
                              
                              <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                              <h4 class="text-center mb-4">5000-level Additional tasks: play a musical “C” and blink the light </h4>
                              <p>
                                In the additional task, my main goal was to make the blue LED on the Artemis light up when musical C is played and turn off when the sound stops.
                              </p>
                              
                              <p>
                                After multiple tests, I found that the frequency of musical C was 526 Hz. So, I modified the Example1_MicrophoneOutput file by adding the following code and uploaded it to the Artemis.
                              </p>
                              
                              <pre><code class="language-c">
ui32LoudestFrequency = (sampleFreq * ui32MaxIndex) / pdmDataBufferSize;
if (ui32LoudestFrequency >= 524 && ui32LoudestFrequency <= 527)
{
    digitalWrite(LED_BUILTIN, HIGH);  // turn the LED on (HIGH is the voltage level)
    Serial.println("turn the light on");
}else{
    digitalWrite(LED_BUILTIN, LOW);   // turn the LED off by making the voltage LOW
    Serial.println("turn the light off");
}
                                </code></pre>
                                <p>
                                    To avoid interference from background noise, I set the LED to turn on only when the detected frequency was within the 524–527 Hz range. Finally, I successfully achieved my task objective.
                                </p>
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                      src="https://www.youtube.com/embed/3HO8Dtj66tU"
                                      title="YouTube video"
                                      allowfullscreen>
                                    </iframe>
                                  </div>
                                
                            <hr class="my-4"/>

                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Lab 1B part</h2>
                            <h4 class="text-center mb-4">Prelab and Computer Setup</h4>
                            <p class="text-justify">
                                Before starting the tasks in Lab 1B, I needed to download Python, create a virtual environment, and activate it.
                            </p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                
                                <!-- 第一张图片（Artemis Nano） -->
                                <div class="col-sm-6 col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab1/lab1b/setup1.png" 
                                        alt="Artemis Nano" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                            
                                <!-- 第二张图片（Type-C Cables） -->
                                <div class="col-sm-6 col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab1/lab1b/setup2.png"
                                        alt="USB Type-C Cables" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                                
                                </div>
                            </div>

                            <p>
                                The next and most important step was properly configuring BLE (Bluetooth Low Energy) communication to ensure a stable connection between my computer and the Artemis development board.
                            </p>
                            <p>
                                To achieve this, I needed to change the Artemis's MAC address and generate a new UUID.
                                
                                The purpose of this step was to ensure that my Artemis board had a unique BLE identifier (determined by its MAC address and UUID) and to prevent accidental BLE connections to the wrong device.
                            </p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                
                                <!-- 第一张图片（Artemis Nano） -->
                                <div class="col-sm-6 col-md-4">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab1/lab1b/MAC.png" 
                                        alt="Artemis Nano" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                            
                                <!-- 第二张图片（Type-C Cables） -->
                                <div class="col-sm-6 col-md-4">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab1/lab1b/UUID.png"
                                        alt="USB Type-C Cables" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                                
                                </div>
                                
                                <!-- 图片下方的文字说明 -->
                                <p class="text-center mt-3">
                                These two screenshots show the files that I change the MAC and UUID of my Artemis.
                                </p>
                            </div>

                            <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                            <h4 class="text-center mb-4">Task1: ECHO Command</h4>
                            <p>

                                In Task 1, I implemented the ECHO command, which sends a string from the computer to the Artemis board and then receives the same string back.
                            </p>
                            <p>
                                Inspired by the <strong>PING command</strong>, my strategy was to first store the received string 
                                in an array using <strong><em>tx_estring_value.append</em></strong>, 
                                and then send it back to the computer using 
                                <strong><em>tx_characteristic_string.writeValue</em></strong>.
                            </p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                  <!-- 在中等及以上屏幕占 8/12，居中显示 -->
                                  <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab1/lab1b/T1A.png" 
                                           class="img-fluid rounded" 
                                           style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                </div>
                                <p class="text-center mt-3">
                                    the Artemis-side code for Task 1 (ECHO command)
                                    </p>
                              </div>     

                              <p>
                                From the two screenshots below, we can see that my computer successfully received the message <strong><em>"Robot says -> Hihello:)"</em></strong>.

                                Additionally, the expected prompt was correctly printed on the serial monitor of the Artemis board.
                              </p>

                              <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                
                                <!-- 第一张图片（Artemis Nano） -->
                                <div class="col-sm-6 col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab1/lab1b/T1AR.png" 
                                        alt="Artemis Nano" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                            
                                <!-- 第二张图片（Type-C Cables） -->
                                <div class="col-sm-6 col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab1/lab1b/T1JR.png"
                                        alt="USB Type-C Cables" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                                </div>
                                </div>


                                <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                                <h4 class="text-center mb-4">Task2: SEND_THREE_FLOATS</h4>
                                <p>
                                    The main goal of Task 3 was to implement the SEND_THREE_FLOATS command, which sends three floating-point numbers to the Artemis board and prints them on the Artemis side.
                                </p>
                                <p>
                                    After completing the ECHO command, this task was relatively straightforward. My approach was to call <strong><em>robot_cmd.get_next_value()</em></strong> three times to retrieve the three floating-point numbers sent from the PC and then print them using <strong><em>Serial.print()</em></strong>.
                                </p>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-4 justify-content-center">
                                    
                                    <!-- 第一张图片（Artemis Nano） -->
                                    <div class="col-sm-6 col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab1/lab1b/T2ACR.png" 
                                            alt="Artemis Nano" 
                                            class="img-fluid rounded" 
                                            style="max-height: 400px; object-fit: contain;">
                                        </div>
                                    </div>
                                
                                    <!-- 第二张图片（Type-C Cables） -->
                                    <div class="col-sm-6 col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab1/lab1b/T2JR.png"
                                            alt="USB Type-C Cables" 
                                            class="img-fluid rounded" 
                                            style="max-height: 200px; object-fit: contain;">
                                        </div>
                                    </div>
                                    </div>
                                </div>
                                
                                
                                <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                                <h4 class="text-center mb-4">Task3: GET_TIME_MILLIS</h4>
                                <p>
                                    In Task 3, the main goal was to add the GET_TIME_MILLIS command, which makes the robot respond with a string containing the current time in milliseconds and write it to the string characteristic.
                                    This task was very similar to the <strong><em>PONG command</em></strong> and was primarily designed to help us get familiar with the <strong><em>millis() function.</em></strong>  
                                </p>
                                <p>
                                    One small issue I encountered was forgetting to perform explicit type conversion. The function tx_estring_value.append only accepts int, float, double, or string, but millis() returns an unsigned long int. As a result, directly uploading the code caused the following error.
                                </p>
                                <div class="container my-4">
                                    <div class="row g-4 justify-content-center">
                                      <!-- 在中等及以上屏幕占 8/12，居中显示 -->
                                      <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                          <img src="assets/img/lab1/lab1b/T3E.png" 
                                               class="img-fluid rounded" 
                                               style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                      </div>
                                    </div>
                                </div>   
                                <p>
                                    The issue was resolved by explicitly casting millis() to an int before appending it to tx_estring_value.
                                </p>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-4 justify-content-center">
                                    
                                    <!-- 第一张图片（Artemis Nano） -->
                                    <div class="col-sm-6 col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab1/lab1b/T3AR.png" 
                                            alt="Artemis Nano" 
                                            class="img-fluid rounded" 
                                            style="max-height: 400px; object-fit: contain;">
                                        </div>
                                    </div>
                                
                                    <!-- 第二张图片（Type-C Cables） -->
                                    <div class="col-sm-6 col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab1/lab1b/T3JR.png"
                                            alt="USB Type-C Cables" 
                                            class="img-fluid rounded" 
                                            style="max-height: 200px; object-fit: contain;">
                                        </div>
                                    </div>
                                    </div>
                                </div>

                                <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                                <h4 class="text-center mb-4">Task4: Notification Handler</h4>
                                <p>
                                    The main task in Task 4 was to write a notification handler in Python to receive the string value from the Artemis board and extract the timestamp from the received content.
                                    This task helped me become familiar with <strong><em>ble.bytearray_to_string()</em></strong>  and deepened my understanding of <strong>UUIDs and how data is stored and transmitted between the PC and Artemis</strong>.
                                </p>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-4 justify-content-center">
                                    
                                    <!-- 第一张图片（Artemis Nano） -->
                                    <div class="col-sm-6 col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab1/lab1b/T4AR.png" 
                                            alt="Artemis Nano" 
                                            class="img-fluid rounded" 
                                            style="max-height: 400px; object-fit: contain;">
                                        </div>
                                    </div>
                                
                                    <!-- 第二张图片（Type-C Cables） -->
                                    <div class="col-sm-6 col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab1/lab1b/T4JR.png"
                                            alt="USB Type-C Cables" 
                                            class="img-fluid rounded" 
                                            style="max-height: 200px; object-fit: contain;">
                                        </div>
                                    </div>
                                    </div>
                                </div>


                                <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                                <h4 class="text-center mb-4">Task5: Loop and transfer rate</h4>
                                <p>
                                    In Task 5, I wrote a loop to continuously obtain the current time in milliseconds and send it to the computer.

                                    As shown in the results below, 68 timestamps were sent to the PC in 2 seconds, meaning the transmission speed was 34 timestamps per second.

                                    Since each timestamp contains 7 bytes, the data transfer rate was approximately <strong>238 bytes per second.</strong> 
                                </p>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-4 justify-content-center">
                                                            <!-- 第一张图片（Artemis Nano） -->
                                    <div class="col-sm-6 col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab1/lab1b/T5JR1.png" 
                                            alt="Artemis Nano" 
                                            class="img-fluid rounded" 
                                            style="max-height: 400px; object-fit: contain;">
                                        </div>
                                    </div>
                                
                                    <!-- 第二张图片（Type-C Cables） -->
                                    <div class="col-sm-6 col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab1/lab1b/T5JR2.png"
                                            alt="USB Type-C Cables" 
                                            class="img-fluid rounded" 
                                            style="max-height: 200px; object-fit: contain;">
                                        </div>
                                    </div>
                                    </div>
                                </div>
                                <div class="container my-4">
                                    <div class="row g-4 justify-content-center">
                                      <!-- 在中等及以上屏幕占 8/12，居中显示 -->
                                      <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                          <img src="assets/img/lab1/lab1b/T5AR.png" 
                                               class="img-fluid rounded" 
                                               style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                      </div>
                                    </div>
                                </div>  
                            

                                <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                                <h4 class="text-center mb-4">Task6: Store Time Stamps Array</h4>
                                <p>
                                    In Task 6, I defined a constant <strong><em>array_size</em></strong> with a value of 100 to set the size of an array for storing timestamps.

                                    I then sent the entire array back to the computer and printed the timestamps in Jupyter Notebook to verify that they were indeed stored in the array.
                                </p>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-4 justify-content-center">
                                                            <!-- 第一张图片（Artemis Nano） -->
                                    <div class="col-sm-6 col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab1/lab1b/T6JR.png"
                                            alt="Artemis Nano" 
                                            class="img-fluid rounded" 
                                            style="max-height: 400px; object-fit: contain;">
                                        </div>
                                    </div>
                                
                                    <!-- 第二张图片（Type-C Cables） -->
                                    <div class="col-sm-6 col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab1/lab1b/T6AR.png"
                                            alt="USB Type-C Cables" 
                                            class="img-fluid rounded" 
                                            style="max-height: 200px; object-fit: contain;">
                                        </div>
                                    </div>
                                    </div>
                                </div>



                                <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                                <h4 class="text-center mb-4">Task7: GET_TEMP_READINGS command</h4>
                                <p>
                                   
                                    Task 7 was very similar to Task 6.

                                    I added another array of the same size to store temperature readings. Using the GET_TEMP_READINGS command, I stored both timestamps and temperature values.

                                    Finally, I sent both arrays back to the computer and paired each temperature reading with its corresponding timestamp.
                                </p>

                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-4 justify-content-center">
                                                            <!-- 第一张图片（Artemis Nano） -->
                                    <div class="col-sm-6 col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab1/lab1b/T7JR1.png"
                                            alt="Artemis Nano" 
                                            class="img-fluid rounded" 
                                            style="max-height: 400px; object-fit: contain;">
                                        </div>
                                    </div>
                                
                                    <!-- 第二张图片（Type-C Cables） -->
                                    <div class="col-sm-6 col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab1/lab1b/T7JR2.png"
                                            alt="USB Type-C Cables" 
                                            class="img-fluid rounded" 
                                            style="max-height: 200px; object-fit: contain;">
                                        </div>
                                    </div>
                                    </div>
                                </div>
                                <div class="container my-4">
                                    <div class="row g-4 justify-content-center">
                                      <!-- 在中等及以上屏幕占 8/12，居中显示 -->
                                      <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                          <img src="assets/img/lab1/lab1b/T7AR.png" 
                                               class="img-fluid rounded" 
                                               style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                      </div>
                                    </div>
                                </div>  


                                <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                                <h4 class="text-center mb-4">Task8: Discussion</h4>
                            <p>
                                In the tasks above, we have two approaches:
                            </p>
                            
                            <ul>
                               <li>Real-time transmission of timestamps</li> 
                               <li>Batch storage + transmission</li> 
                            </ul>
                            <p>
                                Method 1 Real-time Transmission of Timestamps:
                                    This method is suitable for applications that require low latency, such as real-time monitoring. The advantage is that data is immediately transmitted to the computer, but it may be limited by BLE transmission speed. Frequent transmission of small data packets can lead to packet loss or higher power consumption.
                            </p>
                            <p>
                                Method 2 Batch Storage + Transmission:
                                    This method is better suited for large-scale data collection, such as experimental data recording. It first stores data in memory and then transmits it all at once, which improves transmission efficiency and reduces BLE connection overhead. However, its disadvantages include increased storage management complexity and the inability to access data in real time.  
                            </p>
                                <p>
                                    Data Recording Speed Comparison
                                    With an ideal BLE transmission speed of approximately 1 Mbps, Method 2 can record timestamps and temperature readings at a maximum rate of about 7,812 data points per second.
                                    
                                    If storing data in Artemis's RAM, which has only 384 KB, and assuming 16 bytes per data point, it can store approximately 24,576 data points before requiring transmission.
                                </p>


                            <hr style="border: none; border-top: 2px dashed #666; margin: 2rem 0;" />
                            <h4 class="text-center mb-4">5000 Level Additional Task</h4>
                            <h5>Effective Data Rate And Overhead:</h5>
                            <p>
                                In this task, I implemented the <strong><em>Effective_Data_Rate function</em></strong> to measure the Round-Trip Time (RTT) for different message sizes.
                            </p>
                            <p>
                              The results are as follows:  
                            </p>    
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                                        <!-- 第一张图片（Artemis Nano） -->
                                <div class="col-sm-6 col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab1/lab1b/ATA.png"
                                        alt="Artemis Nano" 
                                        class="img-fluid rounded" 
                                        style="max-height: 400px; object-fit: contain;">
                                    </div>
                                </div>
                            
                                <!-- 第二张图片（Type-C Cables） -->
                                <div class="col-sm-6 col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab1/lab1b/ATJ.png"
                                        alt="USB Type-C Cables" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                                </div>
                            </div>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                  <!-- 在中等及以上屏幕占 8/12，居中显示 -->
                                  <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab1/lab1b/output.png" 
                                           class="img-fluid rounded" 
                                           style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                </div>
                            </div>  
                            
                            <p>
                                We can see that message size and RTT have a proportional relationship—as the message size increases, it takes more time to send the data back to the PC. This indicates that larger message sizes result in slower transmission speeds.
                            </p>

                            <h5>Reliability: </h5>
                            <p>
                                During the reliability stress test, when I set the message size to 480, I was unable to obtain an RTT, and the connection to Artemis was forcibly disconnected.
                                This indicates that if data is sent too quickly, it may overflow, causing some data to be dropped.
                            </p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                                        <!-- 第一张图片（Artemis Nano） -->
                                <div class="col-sm-6 col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab1/lab1b/ATA2.png"
                                        alt="Artemis Nano" 
                                        class="img-fluid rounded" 
                                        style="max-height: 400px; object-fit: contain;">
                                    </div>
                                </div>
                            
                                <!-- 第二张图片（Type-C Cables） -->
                                <div class="col-sm-6 col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab1/lab1b/ATJ2.png"
                                        alt="USB Type-C Cables" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                                </div>
                            </div>
                            
                            <h2 class="text-center mb-4">Conclusion:</h2>
                            <p class="text-justify">
                                Through Lab 1, I bknow how to establish communication between the PC and the Artemis board.
                            </p>
                            <p>
                                Additionally, I learned how UUIDs and MAC addresses ensure the uniqueness of the Artemis board.
                            </p>
                            <p>
                                Most importantly, I gained insights into how data transmission size and speed affect response time, which will help me approach data transmission challenges more effectively in the future.
                            </p>

                        </div><!-- /container-fluid -->
                    </div><!-- /modal-body -->

                    <!-- Modal 底部 -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CLOSE</button>
                    </div>

                </div><!-- /modal-content -->
            </div><!-- /modal-dialog -->
        </div>

                <!-- Here is the code for LAB 2 report -->
        <div class="modal fade" id="lab2Modal" tabindex="-1" aria-labelledby="lab2ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content border-0 shadow">

                    <!-- Modal 头部 -->
                    <div class="modal-header bg-light">
                        <h5 class="modal-title fw-bold" id="lab1ModalLabel">Lab 2 Report</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <!-- Modal 主体：通过 p-4 增加内边距，max-height: 80vh 和 overflow-y: auto 用于可滚动 -->
                    <div class="modal-body p-4" style="max-height: 80vh; overflow-y: auto;">

                        <!-- 可以在内部再包一层容器，便于统一排版 -->
                        <div class="container-fluid">

                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Lab 2: IMU</h2>
                            <p class="text-justify">
                                The purpose of this Lab is to familiarize with the calculation and transmission of IMU-related data, specifically obtaining IMU data to compute roll, pitch, and yaw and transmitting it to a computer. Additionally, it aims to understand how to reduce noise interference in the final output.
                            </p>

                            
                            <hr class="my-4"/><!-- 分割线 -->
                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Setup the IMU</h2>
                            <p class="text-justify">
                            First, the Artemis board and IMU need to be properly connected, as shown in the diagram below.
                            </p>
                            <!-- 图片区容器 -->                       
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab2/Artemis_IMU.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <p>
                                Next, I installed the <strong>"SparkFun 9DOF IMU Breakout - ICM 20948 Arduino Library"</strong>  from the Arduino Library Manager and connected the IMU to the Artemis board using the QWIIC connector.
                            </p>
                            <p>
                                To verify if the IMU is working properly, I ran the example program located at: <em>..\Arduino\libraries\SparkFun_ICM-20948\SparkFun_ICM-20948_ArduinoLibrary-master\examples\Arduino\Example1_Basics.</em> 
                            </p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                  <iframe
                                    src="https://www.youtube.com/embed/hFzSHC5e2-M"
                                    title="YouTube video"
                                    allowfullscreen>
                                  </iframe>
                                </div>
                              </div>
                            
                            <p>
                                Also, I added code shown below so that the LED would blink three times slowly on start-up.
                            </p>

                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab2/Blink.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                              
                            <dt><em>Q: What does AD0_VAL represent, and should it be 0 or 1?</em></dt>
                            <dd>A: AD0_VAL is a configuration setting used to define the I²C address of the ICM-20948 IMU sensor. When I attempted to change AD0_VAL from 1 to 0, I found that I couldn't receive data from the IMU. After reviewing previous students' reports, I noticed that they had to change AD0_VAL from 1 to 0 to receive data.

                            I believe the reason for this issue is that this year we are using the SparkFun breakout board, which is different from the one used in previous years.</dd>



                            


                            <hr class="my-4"/>
                            <h2 class="text-center mb-4">Accelerometer</h2>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                  <iframe
                                    src="https://www.youtube.com/embed/_rIRA0efREY"
                                    title="YouTube video"
                                    allowfullscreen>
                                  </iframe>
                                </div>
                              </div>
                            <p>
                                The video above demonstrates how the roll and pitch values change when I place the IMU in a horizontal position and different vertical orientations.
                            </p>
                            <p>
                                I used <strong><em>myICM.dataReady()</em></strong> to check if the IMU data is ready and <strong><em>myICM.getAGMT()</em> </strong>to update the accelerometer values for the x, y, and z axes.
                            </p>

                            <p>
                                Then, I implemented the formulas shown in the classroom slides on Arduino to calculate the Roll and Pitch values.
                            </p>

                            
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                
                                <!-- 第一张图片（Artemis Nano） -->
                                <div class="col-sm-6 col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab2/a_slide.png" 
                                        alt="Artemis Nano" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                            
                                <!-- 第二张图片（Type-C Cables） -->
                                <div class="col-sm-6 col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab2/a_slide_code.png"
                                        alt="USB Type-C Cables" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                                
                                </div>
                            </div>

                            <p>As shown in the video, the final output differs from the expected output. The table below illustrates this difference.</p>
                            <div class="table-responsive">
                                <table class="table table-bordered align-middle">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Rotation</th>
                                            <th>90 (expected)</th>
                                            <th>0 (expected)</th>
                                            <th>-90 (expected)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Roll</td>
                                            <td>88.4 (final)</td>
                                            <td>-0.3 (final)</td>
                                            <td>-91.2 (final)</td>

                                        </tr>
                                        <tr>
                                            <td>Pitch</td>
                                            <td>87.6 (final)</td>
                                            <td>-0.8 (final)</td>
                                            <td>-88.7 (final)</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <p>To better observe roll and pitch, I added a new case, <strong><em>GET_Pitch_Roll</em></strong>, to the <strong>Lab 1 code</strong>. This allows the IMU to transmit data to my computer. Therefore, I collected 150 data points at a 50ms interval.</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab2/a_RPShow.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>It can be observed that the data is not perfectly smooth and contains noise. To analyze the noise, I studied how to apply the Fourier Transform in Python by referring to the following resource:  
                            <a href="https://www.alphabold.com/fourier-transform-in-python-vibration-analysis/">Fourier Transform in Python - Vibration Analysis</a>. </p>

                            <p>Using this method, I obtained the following noise spectrum.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                
                                <!-- 第一张图片（Artemis Nano） -->
                                <div class="col-sm-4 col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab2/noise_!.png" 
                                        alt="Artemis Nano" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                            
                                <!-- 第二张图片（Type-C Cables） -->
                                <div class="col-sm-4 col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab2/noise_2.png"
                                        alt="USB Type-C Cables" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                                
                                </div>
                            </div>
                            <p>From the two images above, I observed that the noise is mainly concentrated in the <strong>0~2 Hz</strong>range. Therefore, I selected <strong>2 Hz</strong> as the cutoff frequency.</p>
                            <p>Below is the Python code for implementing a low-pass filter and the result after applying the low-pass filter:</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                
                                <!-- 第一张图片（Artemis Nano） -->
                                <div class="col-sm-4 col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab2/low_pass.png" 
                                        alt="Artemis Nano" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                            
                                <!-- 第二张图片（Type-C Cables） -->
                                <div class="col-sm-4 col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab2/lowpass_result.png"
                                        alt="USB Type-C Cables" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>

                            </div>
                            <p>It can be observed that after applying the low-pass filter, the data graph becomes much smoother and a amount of noise is reduced.</p>

                            <hr class="my-4"/>
                            <h2 class="text-center mb-4">Gyroscope</h2>

                            <p>For the <strong>gyroscope</strong>, the general approach is similar to that of the accelerometer. </p>

                            <p>First, based on the following calculation formulas, I added a new case, <strong>GET_PRY_Gyroscope</strong>, to the <strong>Lab 1</strong> code to compute <strong>roll, pitch, and yaw</strong> using the gyroscope.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                
                                <!-- 第一张图片（Artemis Nano） -->
                                <div class="col-sm-4 col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab2/g_formula.png" 
                                        alt="Artemis Nano" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                            
                                <!-- 第二张图片（Type-C Cables） -->
                                <div class="col-sm-4 col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab2/g_code.png"
                                        alt="USB Type-C Cables" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                            </div>

                                <p>As a result, I obtained the following output images:</p>
                                <div class="container my-4">
                                    <div class="row g-4 justify-content-center">
                                        <div class="col-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                            <img src="assets/img/lab2/g_ouput.png" 
                                                alt="blink" 
                                                class="img-fluid rounded" 
                                                style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                        </div>
                                    </div>
                                </div>


                                <p>Then, I combined the <strong>Gyroscope</strong> and <strong>Accelerometer</strong> code to obtain a comparison graph of <strong>roll</strong> and <strong>pitch</strong> from both sensors. Also, I got the ouput of Yaw.</p>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-3 justify-content-center">
                                    
                                        <!-- 第一张图片（Artemis Nano） -->
                                        <div class="col-sm-4 col-md-8">
                                            <div class="p-2 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                <img src="assets/img/lab2/roll_c.png" 
                                                    alt="Artemis Nano" 
                                                    class="img-fluid rounded" 
                                                    style="max-height: 250px; object-fit: contain; width: 100%;">
                                            </div>
                                        </div>
                                    
                                        <!-- 第二张图片（Type-C Cables） -->
                                        <div class="col-sm-4 col-md-8">
                                            <div class="p-2 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                <img src="assets/img/lab2/pitch_c.png"
                                                    alt="USB Type-C Cables" 
                                                    class="img-fluid rounded" 
                                                    style="max-height: 250px; object-fit: contain; width: 100%;">
                                            </div>
                                        </div>
                                
                                        <!-- 第三张图片 -->
                                        <div class="col-sm-4 col-md-8">
                                            <div class="p-2 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                <img src="assets/img/lab2/yaw.png"
                                                    alt="USB Type-C Cables" 
                                                    class="img-fluid rounded" 
                                                    style="max-height: 250px; object-fit: contain; width: 100%;">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <p>It can be observed that the <strong>Accelerometer</strong> is more sensitive to noise compared to the <strong>Gyroscope</strong>. Even minor noise can cause significant fluctuations in the Accelerometer readings.</p>

                                <p>On the other hand, the <strong>Gyroscope</strong> tends to exhibit a continuous increase or decrease over time. This phenomenon is not very noticeable in the graph above because the dataset is relatively small and the time intervals are short.</p>

                                <p>However, in the following experiment on the <strong>complementary filter</strong>, this issue becomes more evident.</p>
                                <p>Based on the content from the classroom slides, I got the formula for the <strong>complementary filter</strong> and implemented it in the <strong>Arduino</strong> code.</p>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-4 justify-content-center">
                                    
                                    <!-- 第一张图片（Artemis Nano） -->
                                    <div class="col-sm-4 col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab2/C_formula.png" 
                                            alt="Artemis Nano" 
                                            class="img-fluid rounded" 
                                            style="max-height: 200px; object-fit: contain;">
                                        </div>
                                    </div>
                                
                                    <!-- 第二张图片（Type-C Cables） -->
                                    <div class="col-sm-4 col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab2/C_filter_code.png"
                                            alt="USB Type-C Cables" 
                                            class="img-fluid rounded" 
                                            style="max-height: 200px; object-fit: contain;">
                                        </div>
                                    </div>
                                </div>

                                <p>The most important step was determining the value of <strong>alpha</strong>. I experimented with multiple alpha values and finally settled on <strong>0.7</strong>.</p>

                                <p>Below are the output graphs for <strong>alpha = 0.7</strong> and <strong>alpha = 0.2</strong>.</p>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-3 justify-content-center">
                                    
                                        <!-- 第一张图片（Artemis Nano） -->
                                        <div class="col-sm-4 col-md-6">
                                            <div class="p-2 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                <img src="assets/img/lab2/07pitch.png" 
                                                    alt="Artemis Nano" 
                                                    class="img-fluid rounded" 
                                                    style="max-height: 250px; object-fit: contain; width: 100%;">
                                            </div>
                                        </div>
                                    
                                        <!-- 第二张图片（Type-C Cables） -->
                                        <div class="col-sm-4 col-md-6">
                                            <div class="p-2 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                <img src="assets/img/lab2/07roll.png"
                                                    alt="USB Type-C Cables" 
                                                    class="img-fluid rounded" 
                                                    style="max-height: 250px; object-fit: contain; width: 100%;">
                                            </div>
                                        </div>
                                
                                        <!-- 第三张图片 -->
                                        <div class="col-sm-4 col-md-6">
                                            <div class="p-2 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                <img src="assets/img/lab2/02pitch.png"
                                                    alt="USB Type-C Cables" 
                                                    class="img-fluid rounded" 
                                                    style="max-height: 250px; object-fit: contain; width: 100%;">
                                            </div>
                                        </div>

                                        <div class="col-sm-4 col-md-6">
                                            <div class="p-2 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                <img src="assets/img/lab2/02roll.png"
                                                    alt="USB Type-C Cables" 
                                                    class="img-fluid rounded" 
                                                    style="max-height: 250px; object-fit: contain; width: 100%;">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <p>From the graphs above, it can be observed that if the value of <strong>alpha</strong> is too low, the final result will overly rely on the <strong>Gyroscope</strong>, causing a continuous increase or decrease over time.</p>

                                <p>However, with <strong>alpha = 0.7</strong>, the filter effectively combines the advantages of both the <strong>Gyroscope</strong> and the <strong>Accelerometer</strong>, producing a more accurate and stable result. Therefore, <strong>alpha = 0.7</strong> is a better choice.</p>

                                <hr class="my-4"/>
                                <h2 class="text-center mb-4">Sample Data</h2>
                                <p>First, I commented out all <strong>Serial.print</strong> statements in the main loop to eliminate any delays they might cause.</p>

                                <p>As shown in the code snippet below, I used <strong>ActiveFlag</strong> as a marker to indicate the start of data recording. The function <strong>record_process()</strong> is responsible for transmitting the <strong>x-axis</strong> data from both the <strong>Gyroscope</strong> and <strong>Accelerometer</strong> to my PC.</p>

                                <p>Although this function could also transmit the previously computed <strong>roll, pitch, and yaw</strong>, this part of the lab primarily focuses on discussing data transmission methods and efficiency. Therefore, it has been simplified to only send the x-axis data of the <strong>Gyroscope</strong> and <strong>Accelerometer</strong>.</p>

                                <p>Additionally, I introduced the variable <strong>MissCase</strong> to detect instances where the IMU data is not ready.</p>

                                <div class="container my-4">
                                    <div class="row g-4 justify-content-center">
                                        <div class="col-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                            <img src="assets/img/lab2/loop_code.png" 
                                                alt="blink" 
                                                class="img-fluid rounded" 
                                                style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                        </div>
                                    </div>
                                </div>

                                <p>As shown in the image below, I used <strong>case Loop_Start</strong> and <strong>case Loop_End</strong> to control the start and end of the loop.</p>

                                <p>Additionally, I configured the LED on the <strong>Artemis</strong> to remain <strong>lit</strong> while recording data and to <strong>blink three times</strong> upon completion. This visual indication helps me better determine the current state of the process.</p>
                                <div class="container my-4">
                                    <div class="row g-4 justify-content-center">
                                        <div class="col-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                            <img src="assets/img/lab2/case_code.png" 
                                                alt="blink" 
                                                class="img-fluid rounded" 
                                                style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mx-auto" style="max-width: 600px;">
                                    <div class="ratio ratio-16x9 mb-3">
                                      <iframe
                                        src="https://www.youtube.com/embed/wuxMkb15hlY"
                                        title="YouTube video"
                                        allowfullscreen>
                                      </iframe>
                                    </div>
                                </div>
                                <p>Using the code shown in the image below, I collected data over a period of <strong>5 seconds</strong>.</p>

                                <p>During this time, I recorded <strong>1,131 samples</strong>, and the value of <strong>MissCase</strong> was <strong>0</strong>. This indicates that the <strong>IMU generates new data faster than the main loop executes</strong>.</p>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-4 justify-content-center">
                                    
                                    <!-- 第一张图片（Artemis Nano） -->
                                    <div class="col-sm-4 col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab2/loop_j_code.png" 
                                            alt="Artemis Nano" 
                                            class="img-fluid rounded" 
                                            style="max-height: 200px; object-fit: contain;">
                                        </div>
                                    </div>
                                
                                    <!-- 第二张图片（Type-C Cables） -->
                                    <div class="col-sm-4 col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab2/loop_output.png"
                                            alt="USB Type-C Cables" 
                                            class="img-fluid rounded" 
                                            style="max-height: 200px; object-fit: contain;">
                                        </div>
                                    </div>
                                </div>

                        <hr class="my-4"/>
                        <h2 class="text-center mb-4">Record a stunt!</h2>
                        <p>I originally hoped that the car would <strong>dash onto the cardboard and perform a cool backflip</strong>, but that didn’t quite work out.</p>

                        <p>However, the <strong>high-speed spin</strong> was still a pretty awesome stunt!</p>
                        <div class="mx-auto" style="max-width: 600px;">
                            <div class="ratio ratio-16x9 mb-3">
                              <iframe
                                src="https://www.youtube.com/embed/_Qolb9cZdKE"
                                title="YouTube video"
                                allowfullscreen>
                              </iframe>
                            </div>
                        </div> 
                        <hr class="my-4"/>
                        <h2 class="text-center mb-4">Conclusion:</h2>
                        <p class="text-justify">
                            <p>In this lab, I learned how to obtain data from the <strong>accelerometer</strong> and <strong>gyroscope</strong> and calculate the corresponding <strong>roll</strong>, <strong>pitch</strong>, and <strong>yaw</strong>.</p>

                            <p>More importantly, I learned to use the <strong>low-pass filter</strong> and <strong>complementary filter</strong> to obtain reliable data. This prepares me for ensuring accurate navigation of the car in future tasks.</p>
                            

                        </div><!-- /container-fluid -->
                    </div><!-- /modal-body -->

                    <!-- Modal 底部 -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CLOSE</button>
                    </div>

                </div><!-- /modal-content -->
            </div><!-- /modal-dialog -->
        </div>
    </div>
        </div> <!-- end container-fluid -->
        </div> <!-- end modal-body -->
        </div> 
        
                <!-- Here is the code for LAB 3 report -->       
        <div class="modal fade" id="lab3Modal" tabindex="-1" aria-labelledby="lab3ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content border-0 shadow">

                    <!-- Modal 头部 -->
                    <div class="modal-header bg-light">
                        <h5 class="modal-title fw-bold" id="lab1ModalLabel">Lab 3 Time of Flight Sensors</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <!-- Modal 主体：通过 p-4 增加内边距，max-height: 80vh 和 overflow-y: auto 用于可滚动 -->
                    <div class="modal-body p-4" style="max-height: 80vh; overflow-y: auto;">

                        <!-- 可以在内部再包一层容器，便于统一排版 -->
                        <div class="container-fluid">

                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Lab 3 Time of Flight Sensors</h2>
                            <h2>Objective</h2>
                            <p>The goal of this lab is to equip the robot with distance sensors. By optimizing the sampling speed and reliability of sensor readings, the robot can improve its driving performance.</p>
                            
                            <h2>Parts Required</h2>
                            <ul>
                                <li>1 × SparkFun RedBoard Artemis Nano</li>
                                <li>1 × USB cable</li>
                                <li>2 × 4m ToF sensors</li>
                                <li>1 × 9DOF IMU sensor</li>
                                <li>1 × QWIIC Breakout board</li>
                                <li>3 × Qwiic connectors</li>
                                <li>1 × 650mAh battery from the RC car</li>
                                <li>1 × Ruler or graph paper</li>
                                <li>1 × Wire strippers/ Mini cutters</li>
                                <li>1 × Soldering iron</li>

                            
                            <hr class="my-4"/><!-- 分割线 -->
                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Before Soldering</h2>
                            <h3 class="text-center mb-4">I2C ADDRESS</h3>
                            <p class="text-justify">
                            Following the information shown by the datasheet, the I2C sensor address should be 0x52. The detail is shown on the pic blow.
                            </p>
                            <!-- 图片区容器 -->                       
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab3/address.jpg" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <h3 class="text-center mb-4">2 ToF sensors: How to use and Future Design Considerations</h3>
                            <h5>Using Two TOF Sensors:</h5>
                            <p>To use two TOF sensors simultaneously, I nedd to use XSHUT pin. By first disabling one sensor via the XSHUT pin, only one active sensor remains on the I²C bus. Then, an I²C command is used to assign a new address to this available sensor. After that, the other sensor is re-enabled (it still retains the default address at this point).</p>
                            <p>Now that the two sensors have different addresses, the host can communicate with both sensors separately, allowing them to be used simultaneously.</p>
                            <h5>Future Design Considerations</h5>
                            <p>After watching the 2024 Spring students' Lab 12 video, I noticed that our final autonomous driving experiment will take place on a flat surface without slopes, and the obstacles are not difficult-to-detect objects like tilted poles.</p>
                            <p>Therefore, my approach is to position one ToF sensor facing forward and the other facing backward to detect obstacles in both movement directions.</p>
                            <p>However, I will not simply place the two sensors directly at the front and rear of the car. Instead, I will tilt both sensors slightly at a 30-degree angle (the line connecting the two sensors forms a 30-degree angle with the car's central axis). This way, I can also achieve side obstacle detection.</p>

                            <h3 class="text-center mb-4">Last Step Before Soldering: Sketch of wiring diagram</h3>
                            <!-- 图片区容器 -->                       
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab3/connection.jpeg" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            





                            


                            <hr class="my-4"/>
                            <h2 class="text-center mb-4">Soldering, Testing and Data Recording</h2>
                            <h3 class="text-center mb-4">Soldering</h3>
                            <p>First, I soldered all the parts according to the Sketch of the wiring diagram, as shown in the figure below.</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab3/finalconnectnon.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <p>To prepare for future wireless connectivity, I also soldered the battery wires to the JST jumper.</p>

                            <p>Additionally, I tested whether the Artemis board could function properly with battery power alone by running the test code from Lab 1.</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                  <iframe
                                    src="https://www.youtube.com/embed/EJFTL-81p44?si=Egw5MnnmGdrJLcy5"
                                    title="YouTube video"
                                    allowfullscreen>
                                  </iframe>
                                </div>
                            </div>
                            <p>From the video, it can be seen that the Artemis board continues to function normally with battery power alone.</p>
                            
                            
                            
                            
                            <hr class="my-4"/>
                            <h3 class="text-center mb-4">Example1_wire_I2C</h3>
                            <p>In this section, I ran <code>Example1_wire_I2C</code> to check whether the I2C addresses matched my expectations. The results are shown in the figure below.</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab3/addressscan.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>I noticed that the scanned I2C address was 0x29, which differs from the address (0x52) provided in the datasheet. Why is this?</p>

                            <p>The reason is that the datasheet provides an 8-bit address (including the read/write bit), while I²C scanning tools (such as <code>Example1_wire_I2C.ino</code>) typically use a 7-bit address.</p>

                            <p>The 8-bit address 0x52 corresponds to <code>0b1010010</code>. Removing the last bit (shifting right by one bit) results in <code>0b0101001</code>, which is 0x29. This explains why my scan detected 0x29.</p>
                           <hr class="my-4"/>
                            <h3 class="text-center mb-4">Different sensor mode and Discussion</h3>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab3/testphoto.jpg" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>In this section, since <code>.setDistanceModeMedium()</code> is only applicable to the Pololu VL53L1X library, I chose to test two modes: <code>setDistanceModeShort();</code> and <code>setDistanceModeLong();</code>.</p>
                            <p>I also visualized the obtained data to analyze the differences between these two modes.</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab3/modedata.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>According to the data, within 1.15 meters, both modes exhibit nearly identical accuracy. However, beyond 1.2 meters, <code>DistanceModeShort</code> shows significant errors.</p>

                            <p>I believe this may be partially related to the measurement environment. Since the measurements were conducted in a dimly lit room at night, the lack of light could have contributed to the errors in the <code>DistanceModeShort</code> mode.</p>

                            <p>This indirectly confirms that the sensor is somewhat sensitive to light intensity.</p>
                            <hr class="my-4"/>
                            
                            <h3 class="text-center mb-4">Let's make both sensors work simultaneously!</h3>
                            <p>As shown in the figure, I connected the XSHUT pin to pin A7 of the Artemis Board.</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab3/pin.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <p>The following code demonstrates that by controlling the voltage level of the A7 pin, I successfully assigned a new address to the second sensor.</p>

                            <p>With this setup, both sensors can now operate simultaneously.</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab3/code1.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                  <iframe
                                    src="https://www.youtube.com/embed/PZuErG0NutU?si=5taKsmizPEO1RqBO"
                                    title="YouTube video"
                                    allowfullscreen>
                                  </iframe>
                                </div>
                            </div>


                            <hr class="my-4"/>
                            <h3 class="text-center mb-4">Bottleneck Testing</h3>
                            <p>To determine what limits the performance bottleneck of the ToF sensors, I made the following modifications to the code.</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab3/Bottleneck.jpg" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>In the <code>setup()</code> function, I started the distance measurement using <code>distanceSensor0.startRanging();</code> and <code>distanceSensor1.startRanging();</code> without waiting for it to complete.</p>

                            <p>In the <code>loop()</code> function, I printed <code>millis()</code> in every iteration to measure the execution speed of the loop.</p>

                            <p>If the data is ready, the distance is read and printed.</p>

                            <p>If the data is not yet ready, it is skipped without blocking the main loop.</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab3/BottleneckResult.jpg" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>From the output results, we can observe the following:</p>

                            <p>The <code>Time(ms)</code> value fluctuates between 30 and 50 ms, indicating that the <code>loop()</code> function runs approximately every 15-50 ms.</p>

                            <p>However, new sensor data is not available on every iteration. For example, at 38415 ms and 38627 ms, no new data was recorded.</p>

                            <p>This suggests that sensor data updates only every 30-50 ms.</p>

                            <p><strong>Therefore, the current bottleneck is the sensor's own ranging time.</strong></p>
                            
                            
                            <hr class="my-4"/>
                            <h3 class="text-center mb-4">Recording ToF and IMU data for 10 seconds</h3>
                            <p>Based on the functions implemented in Lab 2, I created the function <code>GET_Pitch_Roll_Distance_10s</code>.</p>

                            <p>The primary function of this implementation is to simultaneously start two ToF sensors and the IMU, record data for 10 seconds, and transmit the collected data to my computer via Bluetooth. The following is a partial screenshot of the code: </p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab3/functioncode.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>Finally, I obtained a graph showing the relationship between ToF data and time, as well as a graph illustrating the relationship between IMU data and time.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                
                                <!-- 第一张图片（Artemis Nano） -->
                                <div class="col-sm-6 col-md-4">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab3/PRT.png" 
                                        alt="Artemis Nano" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                            
                                <!-- 第二张图片（Type-C Cables） -->
                                <div class="col-sm-6 col-md-4">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab3/DST.png"
                                        alt="USB Type-C Cables" 
                                        class="img-fluid rounded" 
                                        style="max-height: 200px; object-fit: contain;">
                                    </div>
                                </div>
                                
                                </div>
                            </div>


                            <hr class="my-4"/>
                            <h2 class="text-center mb-4">Additional tasks (5000 Level)</h2>
                            <h3 class="text-center mb-4">Discussion on the advantages and disadvantages of different distance sensors</h3>

                            <table border="1" cellspacing="0" cellpadding="5">
                                <tr>
                                    <th>Sensor Type</th>
                                    <th>Functionality</th>
                                    <th>Pros</th>
                                    <th>Cons</th>
                                </tr>
                                <tr>
                                    <td>Time-of-Flight (ToF) Sensor</td>
                                    <td>Measures the time taken for infrared light to travel to an object and reflect back to determine distance.</td>
                                    <td>
                                        <ul>
                                            <li>High accuracy</li>
                                            <li>Works well in varying lighting conditions</li>
                                            <li>Can measure long distances (up to several meters)</li>
                                        </ul>
                                    </td>
                                    <td>
                                        <ul>
                                            <li>More expensive compared to other IR sensors</li>
                                            <li>Performance may degrade on highly reflective or transparent surfaces</li>
                                        </ul>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Infrared Proximity Sensor</td>
                                    <td>Detects objects based on the intensity of reflected infrared light.</td>
                                    <td>
                                        <ul>
                                            <li>Low cost</li>
                                            <li>Fast response time</li>
                                            <li>Simple implementation</li>
                                        </ul>
                                    </td>
                                    <td>
                                        <ul>
                                            <li>Limited accuracy and range</li>
                                            <li>Performance affected by ambient light</li>
                                            <li>Cannot provide precise distance measurements</li>
                                        </ul>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Structured Light Sensor</td>
                                    <td>Projects an infrared pattern onto an object and analyzes the distortion to calculate depth.</td>
                                    <td>
                                        <ul>
                                            <li>Can capture 3D depth information</li>
                                            <li>More accurate than simple proximity sensors</li>
                                            <li>Used in facial recognition and object scanning</li>
                                        </ul>
                                    </td>
                                    <td>
                                        <ul>
                                            <li>Sensitive to ambient infrared light</li>
                                            <li>Limited effective range</li>
                                            <li>Computationally intensive</li>
                                        </ul>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Laser Range Finder (LIDAR)</td>
                                    <td>Uses a laser pulse and measures the time taken for it to return, similar to ToF but typically with higher precision.</td>
                                    <td>
                                        <ul>
                                            <li>Very accurate over long distances</li>
                                            <li>Works well in low-light conditions</li>
                                            <li>Commonly used in autonomous vehicles</li>
                                        </ul>
                                    </td>
                                    <td>
                                        <ul>
                                            <li>Expensive compared to other distance sensors</li>
                                            <li>May struggle with highly reflective or transparent surfaces</li>
                                            <li>Larger and more power-intensive</li>
                                        </ul>
                                    </td>
                                </tr>
                            </table>
                            <hr class="my-4"/>
                            <h3 class="text-center mb-4">ToF sensors are sensitive to color and texture</h3>
                            <p>In this section, I collaborated with my classmate <a href="https://haixizhang.github.io/FastRobot/" target="_blank">@Zhang, Haixi</a> to test the sensor's performance under different conditions: a black box, a white box, and a transparent glass bottle.</p>

                            <p>The results are shown in the table below.</p>
                            <table border="1" cellspacing="0" cellpadding="5">
                                <tr>
                                    <th>Collected Data vs Expected Data (cm)</th>
                                    <th>1</th>
                                    <th>2</th>
                                    <th>5</th>
                                    <th>10</th>
                                    <th>15</th>
                                    <th>20</th>
                                    <th>25</th>
                                    <th>30</th>
                                </tr>
                                <tr>
                                    <td>Black Box</td>
                                    <td>1.8</td>
                                    <td>3.8</td>
                                    <td>5.3</td>
                                    <td>9.3</td>
                                    <td>14.1</td>
                                    <td>24.5</td>
                                    <td>27.5</td>
                                    <td>29.6</td>
                                </tr>
                                <tr>
                                    <td>White Box</td>
                                    <td>1.2</td>
                                    <td>2.5</td>
                                    <td>4.6</td>
                                    <td>10.2</td>
                                    <td>15.1</td>
                                    <td>20.4</td>
                                    <td>25.7</td>
                                    <td>30.7</td>
                                </tr>
                                <tr>
                                    <td>White Glass Bottle</td>
                                    <td>0.9</td>
                                    <td>1.8</td>
                                    <td>3.9</td>
                                    <td>9.8</td>
                                    <td>13.8</td>
                                    <td>19.1</td>
                                    <td>24.2</td>
                                    <td>29.3</td>
                                </tr>
                            </table>
                            <p>After conversation, we got those conclusions:</p>

                            <h4>1. Performance in the Black Box</h4>
                            <p>The ToF sensor shows relatively higher deviation in the black box, especially at shorter distances (e.g., at 1 cm, the measured distance is 1.8 cm instead of 1 cm). This is likely because black surfaces absorb more infrared light, reducing the amount of reflected light detected by the sensor. As the distance increases, the accuracy improves slightly, but errors remain noticeable.</p>

                            <h4>2. Performance in the White Box</h4>
                            <p>The white box results are more accurate compared to the black box. White surfaces reflect more infrared light, allowing the sensor to receive a stronger signal. At closer distances, the error is minimal, and even at longer distances, the measurements are quite close to the expected values.</p>

                            <h4>3. Performance with the White Glass Bottle</h4>
                            <p>The sensor's performance with the white glass bottle is slightly worse than the white box but better than the black box. Transparent or semi-transparent materials like glass can refract or scatter infrared light, leading to some inaccuracies. At close distances, the measured values are slightly lower than expected, possibly due to partial transmission of light through the material rather than full reflection.</p>

                            <h4>4. Overall Observations</h4>
                            <ul>
                                <li>The ToF sensor performs best with highly reflective surfaces like the white box.</li>
                                <li>Black surfaces reduce accuracy due to their absorption of infrared light.</li>
                                <li>Transparent materials like glass introduce some measurement errors due to light refraction and scattering.</li>
                                <li>At longer distances, all three materials show improved accuracy, suggesting that environmental factors impact shorter-range measurements more significantly.</li>
                            </ul>



                            <hr class="my-4"/>
                            <h2 class="text-center mb-4">Conclusion</h2>
                            <p>In this experiment, I learned how to use multiple sensors simultaneously on a single I2C bus and record data.</p>

                            <p>Additionally, I discovered that sensor performance varies under different lighting conditions and when detecting obstacles made of different materials.</p>

                            <p>This insight provides valuable guidance for my future autonomous driving experiments with the robot.</p>


                        </div><!-- /container-fluid -->
                    </div><!-- /modal-body -->

                    <!-- Modal 底部 -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CLOSE</button>
                    </div>

                </div><!-- /modal-content -->
            </div><!-- /modal-dialog -->
        </div>

                <!-- Here is the code for LAB 4 report -->
        <div class="modal fade" id="lab4Modal" tabindex="-1" aria-labelledby="lab4ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content border-0 shadow">

                    <!-- Modal 头部 -->
                    <div class="modal-header bg-light">
                        <h5 class="modal-title fw-bold" id="lab1ModalLabel">Lab 4 Motors and Open Loop Control</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <!-- Modal 主体：通过 p-4 增加内边距，max-height: 80vh 和 overflow-y: auto 用于可滚动 -->
                    <div class="modal-body p-4" style="max-height: 80vh; overflow-y: auto;">

                        <!-- 可以在内部再包一层容器，便于统一排版 -->
                        <div class="container-fluid">

                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Lab 4 Motors and Open Loop Control</h2>
                            <h2>Objective</h2>
                            <p>The goal of this lab is to transition from manual control to open-loop control for the car. By the end of this lab, your car should be able to follow a predefined sequence of movements using the Artemis board and two dual motor drivers. Ultimately, this experiment enables the car to achieve both straight-line motion and circular movement under the control of the Artemis board.</p>
                            
                            <h2>Parts Required</h2>
                            <ul>
                                <li>1 x SparkFun RedBoard Artemis Nano</li>
                                <li>1 x USB cable</li>
                                <li>1 x 9DOF IMU sensor</li>
                                <li>2 x 4m ToF sensor</li>
                                <li>1 x QWIIC Breakout board</li>
                                <li>2 x Qwiic connector</li>
                                <li>1 x JST2 connector + cable</li>
                                <li>1 x Force1 RC car</li>
                                <li>1 x Li-Ion 3.7V 850mAh battery</li>
                                <li>2 x Dual motor drivers</li>
                                <li>1 x Wire strippers / Mini cutters</li>
                                <li>1 x Soldering iron</li>
                                <li>1 x External power supply</li>
                                <li>1 x Oscilloscope</li>
                            </ul>
                            

                            
                            <hr class="my-4"/><!-- 分割线 -->
                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Before Soldering</h2>
                            <h3 class="text-center mb-4">Expected Connection Diagram</h3>
                            <p>The following image shows the expected connection diagram. I will perform the soldering based on this diagram.</p>

                            <!-- 图片区容器 -->                       
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab4/connectpic.jpeg" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>As shown in the diagram, I will use A2, A3, A13, and A14 on the Artemis board as motor control pins. Additionally, I will use a 3.7V 850mAh Li-Ion battery to power both motor drivers.</p>  
                            <p>In Lab 3, I successfully powered the Artemis board using a 3.7V 650mAh battery. In this lab, I will continue using the same approach, allowing the Artemis board to operate without a USB power connection.</p>

                            <p><em><strong>Question: I was asked to power the Artemis and the motor drivers/motors from separate batteries. Why is that?</strong></em></p>
                            <p>The Artemis board and the motor drivers/motors should be powered by separate batteries to prevent electrical interference and voltage fluctuations. Motors typically draw a significant amount of current, which can cause sudden voltage drops and introduce noise into the power supply. If both the Artemis board and the motors share the same power source, these fluctuations could lead to instability in the Artemis board, causing unexpected behavior or even system resets. By using separate batteries, it ensure a more stable and reliable power supply for both the control system and the motors.</p>






                            


                            <hr class="my-4"/>
                            <h2 class="text-center mb-4">Lab Tasks</h2>
                            <h3 class="text-center mb-4">Oscilloscope and Signal Display</h3>
                            <p>First, I soldered the motor driver and the Artemis board according to the previously planned connection diagram. At this stage, I did not connect BOUT and AOUT to the motors. Instead, I connected them to the oscilloscope to observe whether there was any signal output. The results are shown in the video.</p>

                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/Ruuqfw7jzYw"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <p>Later, I realized that in the video, I had connected the oscilloscope's output and input ports incorrectly. As a result, although there was a signal output, it was not the expected rectangular waveform. The following image shows the correct signal waveform obtained after properly using the oscilloscope.</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab4/Oscilloscope.jpg" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>Here is my test code</p>
<pre>
    <code>
    void setup() {
        pinMode(ABIN1, OUTPUT);
        pinMode(ABIN2, OUTPUT);
    }
    
    void loop() {
        analogWrite(ABIN1, 255);
        analogWrite(ABIN2, 0);
    }
    </code>
    </pre>

                            <hr class="my-4"/>
                            <h3 class="text-center mb-4">Single Motor Testing</h3>
                            <p>After confirming that the signal was successfully output, I connected the motor driver to the motor and supplied power. The results are shown in the video.</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/-M42pLoUfuo"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <p>Additionally, I conducted a speed variation test on a single motor. The code and video are shown below:</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab4/speedchangecode.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/opdCd6hKUWE"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <p>I observed that during the transition from rest to motion, the motor voltage was relatively high. I believe this is because the motor needs to overcome significant resistance when starting from a stationary state, leading to this effect.</p>
                            
                            
                            
                            
                            <hr class="my-4"/>
                            <h3 class="text-center mb-4">Dual Motor Testing</h3>
                            <p>After successfully testing the operation of a single motor, I soldered all the parts together according to the planned connection diagram and conducted a dual motor operation test. The code and video are shown below.</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab4/twomotor.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/WsRdcqc1WQM"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <p>From the video, it can be seen that the car can accelerate both forward and backward, indicating that all my circuit connections are correct!</p>  
                            <p>Next, I will use another battery to power the Artemis board and make the car run on the ground!</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/5d2KVI9zj4M"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <p>From the video above, it can be seen that with two batteries powering the system, the car successfully runs. (However, setting the PWM value to 255 at the beginning was a bad idea—the car was so fast that it almost took off!)</p>
                            <p>The image below shows how I secured all the components.</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab4/car.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>






                                



                            
                            
                            
                            
                            <hr class="my-4"/>
                            <h3 class="text-center mb-4">The Lower Limit in PWM Value</h3>
                            <p>In this part of the experiment, I determined the minimum PWM values required to make the car move using the enumeration method. The results are:</p>  
                            <ul>
                                <li>Left side: 37</li>  
                                <li>Right side: 55</li>  
                            </ul>
                            <p>The following is a video showing the car in motion.</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/jaKsRbJndrU"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>




                            <hr class="my-4"/>
                            <h3 class="text-center mb-4">Straight-Line Motion Test and Open-Loop Control Test</h3>
                            <p>In the previous experiments, I noticed that the right wheel had significantly less power than the left wheel. To achieve straight-line motion, I used the following PWM values in my first test:</p>  
                            <ul>
                                <li>Left wheel: 55</li>  
                                <li>Right wheel: 40</li>  
                            </ul>
                            <p>The results are shown in the video. The car exhibited a leftward drift.</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/BAsGd1myEXs"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <p>After multiple attempts, I adjusted the PWM values as follows and successfully achieved straight-line motion:</p>  
                            <ul>
                                <li>Left wheel: 65</li>  
                                <li>Right wheel: 43</li>  
                            </ul>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/7jxR7sNOMfM"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <p>From the video, it can be seen that the car is able to travel in a straight line for a distance of more than 2 meters.</p>
                            <p>Next, I conducted an open-loop test on the car, making it move forward, backward, and perform left and right turns. To my surprise, in order for the car to turn in place, I had to set the PWM value to at least 120. This indicates that the car needs to overcome significant friction when turning.</p>

                            <p>I believe this is due to the car's tires being very rough and having deep treads, which create a high amount of friction against the ground. Therefore, in future labs, I might wrap the car's tires with smooth tape to reduce friction.</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/_Z-NaFkoqo8"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>




                            
                             

                            <hr class="my-4"/>
                            <h2 class="text-center mb-4">Additional tasks (5000 Level)</h2>
                            <h3 class="text-center mb-4">Discussion on analogWrite Frequency</h3>
                            <p>Returning to the video below, it can be observed that the frequency of the signal generated by <code>analogWrite</code> is quite high, reaching nearly 190Hz.</p>  

                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/-M42pLoUfuo"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>

                            <p>However, we need to consider potential bottlenecks. If this frequency is lower than the data transmission frequency of the IMU or other sensors, manually setting a higher frequency may become necessary.</p>
                            <h3 class="text-center mb-4">minimum PWM value</h3>
                            <p>The following code represents my approach to finding the minimum PWM value for maintaining motion:</p>  
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab4/5000.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <p>Based on previous experiments, I determined the PWM values required to start the car from a stationary state:</p>  
                            <ul>
                                <li>Left wheel: 55</li>  
                                <li>Right wheel: 40</li>  
                            </ul>

                            <p>Next, I used a <code>for</code> loop to decrease the PWM value by 2 every 2 seconds until it reached 0. During this process, I observed when the car stopped moving and recorded the time at which it stopped. This allowed me to calculate the minimum PWM value required to sustain motion.</p>

                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/wuWPG1GR3xo"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>

                            <p>Finally, I determined that the minimum PWM value required to sustain motion is 36 - 38.</p>








                            <hr class="my-4"/>
                            <h2 class="text-center mb-4">Conclusion</h2>
                            <p>In this lab, I successfully assembled the car. Additionally, this lab made me think about factors that influence the car's eventual "autonomous driving," such as tire friction and the data transmission frequency of different components.</p>  

                            <p>What I found most interesting was that, as a CS major during my undergraduate studies, I had never done so much soldering before. This lab significantly improved my hands-on skills and allowed me to appreciate the beauty of hardware. When the car successfully moved after assembly and soldering, I felt an incredible sense of accomplishment.</p>
                            


                        </div><!-- /container-fluid -->
                    </div><!-- /modal-body -->

                    <!-- Modal 底部 -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CLOSE</button>
                    </div>

                </div><!-- /modal-content -->
            </div><!-- /modal-dialog -->
        </div>
                <!-- Here is the code for LAB 5 report -->
        <div class="modal fade" id="lab5Modal" tabindex="-1" aria-labelledby="lab5ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content border-0 shadow">

                    <!-- Modal 头部 -->
                    <div class="modal-header bg-light">
                        <h5 class="modal-title fw-bold" id="lab1ModalLabel">Lab 5 Linear PID control and Linear interpolation</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <!-- Modal 主体：通过 p-4 增加内边距，max-height: 80vh 和 overflow-y: auto 用于可滚动 -->
                    <div class="modal-body p-4" style="max-height: 80vh; overflow-y: auto;">

                        <!-- 可以在内部再包一层容器，便于统一排版 -->
                        <div class="container-fluid">

                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Lab 5: Linear PID control and Linear interpolation</h2>
                            <h2>Objective</h2>
                            <p>In this lab, we implement PID control to achieve precise position control. PID (Proportional-Integral-Derivative) controllers are widely used in control systems due to their ability to minimize steady-state error while improving response time and stability. The objective is to develop a PID-based position control system, considering practical implementation constraints such as sensor noise, actuator limitations, and tuning challenges.</p>
                            
                            <h2>Parts Required</h2>
                            <ul>
                                <li>1 x Fully assembled robot, with Artemis, TOF sensors, and an IMU.</li>
                            </ul>
                            
                            

                            
                            <hr class="my-4"/><!-- 分割线 -->
                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Prelab: Bluetooth Activation, Data Storage and Transmission</h2>
                            <h3 class="text-center mb-4">Bluetooth Activation</h3>
                            <p>To enable the car to start via Bluetooth, I set a <code>pid_active</code> flag in the Arduino code. I also created a function named <code>pid_control()</code> and placed it inside the <code>loop</code>. If <code>pid_active = 1</code>, the <code>pid_control()</code> function is executed.</p>

                            <p>Additionally, I created a case named <code>PID_control</code> to facilitate Bluetooth communication between the laptop and the Artemis board. The primary function of this case is to receive values for <code>kp</code>, <code>ki</code>, <code>kd</code>, and <code>target_distance</code> from the Python side and set the <code>pid_active</code> value to <code>1</code>.</p>
                            <p>Below is a screenshot of the relevant code:</p>                            
                            <!-- 图片区容器 -->                       
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab5/casecode.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab5/loop control.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>The specific implementation of the <code>pid_control()</code> function and the usage of PID will be explained in detail in the following sections.</p>

                            <h3 class="text-center mb-4">Data Storage and Transmission</h3>
                            <p>I reviewed the content from Lab 2 and implemented data transmission using a similar approach. First, I used arrays <code>P_arr[500]</code>, <code>I_arr[500]</code>, <code>D_arr[500]</code>, <code>Speed[500]</code>, <code>Error_arr[500]</code>, <code>Tof[500]</code>, and <code>Time[500]</code> to store all relevant data from the <code>pid_control()</code> function.</p>
                            <p>Additionally, I created a <code>Data_Send()</code> function and a case named <code>send_data</code> to handle data transmission. The relevant code is shown below:</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab5/SendCase.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab5/SendFunction.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>On the Python side, I used <code>notification_handler</code> to receive data sent from the Artemis board. This approach has been proven effective in Lab 2 and in the subsequent experiments of this lab. A portion of the relevant code is shown below:</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab5/data receiver.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>






                            


                            <hr class="my-4"/>
                            <h2 class="text-center mb-4">PID Control</h2>
                            <h3 class="text-center mb-4">PID Introduction</h3>
                            <p>PID (Proportional-Integral-Derivative) control is a widely used control algorithm in robotics, automation, and industrial systems. It provides precise and stable control by continuously adjusting the system’s output based on error feedback.</p>
                            <ul>
                                <li><strong>Proportional (P):</strong> The proportional term applies a correction proportional to the current error. A higher proportional gain (<code>Kp</code>) leads to a faster response but may cause oscillations.</li>
                                <li><strong>Integral (I):</strong> The integral term accumulates past errors to eliminate steady-state error. A higher integral gain (<code>Ki</code>) helps reduce offset but can introduce instability.</li>
                                <li><strong>Derivative (D):</strong> The derivative term predicts future errors by considering the rate of error change. A higher derivative gain (<code>Kd</code>) helps dampen oscillations and improve stability.</li>
                            </ul>
                            <p>The control output <code>u(t)</code> is given by:</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab5/PIDformula.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            
                            
                            
                            <h3 class="text-center mb-4">PID Implementation</h3>
                            <p>In this section, I will explain how I implemented PID control in the <code>pid_control()</code> function.</p>

                            <p>Based on the formula given in the previous section, I computed the values for <strong>P</strong>, <strong>I</strong>, <strong>D</strong>, and <strong>error</strong>. The sum of these terms (<code>P + I + D</code>) was used as the control output, which serves as the input to the motor.</p>

                            <p>The relevant code is shown below:</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab5/pidcode.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>In the code above, the following two lines particularly necessary and important:</p>

                            <pre>
                            int motor_speed = constrain(control_output, -100, 100);
                            integral = constrain(integral, -200, 200);
                            </pre>

                            <p>These constraints help prevent excessive values that could destabilize the system:</p>
                            <ul>
                                <li><code>motor_speed = constrain(control_output, -100, 100);</code> ensures that the motor speed remains within a safe operating range, preventing saturation or excessive speed.</li>
                                <li><code>integral = constrain(integral, -200, 200);</code> limits the accumulation of the integral term, mitigating integral windup, which can cause instability.</li>
                            </ul>
                            <h3 class="text-center mb-4"> PID Parameter Tuning and Results</h3>
                            <p>In this section, I will attempt to transmit different <code>Kp</code>, <code>Ki</code>, and <code>Kd</code> values to the robot to achieve stopping distances of 304mm and 204mm from the wall.</p>

                            <p><strong>Final Conclusion:</strong></p>
                            <p><code>Kp = 0.1</code>, <code>Ki = 0.0001</code>, <code>Kd = 8</code> produced the best results.</p>
                            <p><strong>Procedure:</strong></p>
                            <p>First, I tested <code>Kp = 0.7</code>, <code>Ki = 0.001</code>, and <code>Kd = 3</code>. I observed an overshoot phenomenon, where the robot continuously oscillated near the target instead of stabilizing. Additionally, the deceleration was too slow, preventing the robot from stopping properly.</p>
                            <p>Below are the related data visualization:</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab5/case1.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>From the visualization above, it can be observed that after hitting the wall, the sensor readings fluctuate significantly, indicating that the robot is in an oscillatory state.</p>
                            <p>To improve the slow deceleration and reduce oscillations, I adjusted the parameters to <code>Kp = 0.5</code>, <code>Ki = 0.0001</code>, while keeping <code>Kd</code> unchanged.</p>
                            <p>Below are the related video and data visualization:</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/Qspw22FAJoM"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab5/0.5,0.0001.3.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>It can be observed that the robot no longer oscillates, but the deceleration is still too slow, causing it to hit the wall. This can also be seen in the data visualization, where the sensor values increase after the collision.</p>
                            <p>To achieve faster deceleration while preventing excessive speed, I adjusted <code>Kp</code> to <code>0.1</code> and <code>Kd</code> to <code>8</code>, keeping <code>Ki</code> unchanged.</p>
                            <p>Below are the related video and data visualization:</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/OqxRLzIxIAw"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab5/0.1,0.0001,8.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>It can be observed that the robot successfully stops at a distance of 304mm from the wall—experiment successful!</p>
                            <p>However, I noticed that the robot tends to drift to the left. To address this, I applied the results from Lab 4 to this experiment.</p>
                            <p>Next, I tested placing the robot at a distance of over 2 meters from the wall and aimed for it to stop at 200mm. To achieve success in this scenario, I adjusted <code>Kd</code> to <code>25</code>.</p>
                            <p>Below are the related video and data visualization:</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/6PxlNlh3Yr8"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab5/0.1,0.0001,25.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>It can be observed that the robot moves forward in a straight line and successfully stops very close to the target distance from the wall—experiment successful!</p>

                            <h4>Different Scenarios: Robot Performance on Carpet</h4>

                            <p>I tested the robot on a carpet using the parameters <code>Kp = 0.1</code>, <code>Ki = 0.0001</code>, <code>Kd = 25</code>, with a target distance of <code>104mm</code>.</p>

                            <p>Below is the video of the experiment:</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/P3BIowmVg28"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <p>It can be observed that, with these parameters, the robot performs excellently on the carpet.</p>



                            <hr class="my-4"/>
                            <h2>Discussion on Sampling Rate and Time</h2>
                            <p>Initially, my strategy was to transmit data immediately after computing the current PID values and motor input, instead of separating data transmission from PID control. This approach caused slow data transmission and occasional Bluetooth congestion.</p>

                            <p>To resolve this issue, I separated data transmission and PID control into two different cases, which effectively eliminated Bluetooth congestion.</p>
                            
                            <p>My final sampling data size was <strong>500</strong>, with a total duration of <strong>5 seconds</strong>.</p>
                            
                            <p>However, in a previous sensor lab, I observed that sometimes, during the loop execution, the sensor data was not yet ready. This occasionally resulted in empty sensor readings within the loop. To address this issue, a data extrapolator needs to be implemented.</p>
                            <hr class="my-4"/>
                            <h2>Extrapolation</h2> 
                            <p>To prevent cases where the ToF sensor might lack data due to its different frequency from the loop, I implemented a data extrapolator using linear interpolation.</p>
                            <p>The relevant code is shown below:</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab5/explore.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>From the code, it can be observed that when the ToF data is detected as not ready, I use the last two ToF data points to calculate the slope and estimate a new ToF value.</p>
                            <p>Below is the visualization of the obtained data:</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab5/pic.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>


                    



                            <hr class="my-4"/>
                            <h2>Tasks for 5000-Level Students</h2>
                            <p>Integral wind-up occurs when the integral term in a PID controller accumulates excessive error during long periods of saturation (when the actuator is at its limit). This can cause significant overshoot, slow response times, and instability. Without wind-up protection, the controller may take a long time to recover, especially when there are constraints such as motor speed limits or varying floor surfaces with different friction coefficients.</p>

                            <p>For example, if the robot starts on a slippery surface and then moves onto a high-friction surface, the integral term may have already accumulated a large value, leading to excessive correction that destabilizes the system. Wind-up protection helps mitigate this issue by preventing the integral term from growing beyond a certain threshold.</p>
                            
                            <h4>Implementation of Wind-Up Protection</h4>
                            <p>To prevent integral wind-up, I implemented a constraint on the integral term, ensuring it remains within a predefined range:</p>
                            
                            <pre>
                            integral = constrain(integral, -200, 200);
                            </pre>
                            
                            <p>Additionally, I reset the motor speed when the control output reaches the actuator limit:</p>
                            
                            <pre>
                                int motor_speed = constrain(control_output, -100, 100);
                            </pre>
                            
                        




                            <hr class="my-4"/>
                            <h2>Acknowledgments</h2>

                            <p><strong>Thanks to TA: @Cameron Urban</strong></p>
                            <p>My ToF data was consistently problematic, preventing me from completing Lab 5 on time. Cameron identified that some solder joints on my ToF sensor might be causing the issue and personally demonstrated better soldering techniques. Under his guidance, I resoldered both ToF sensors and other potential problem areas.</p>
                            
                            <p><strong>Thanks to my partner: @Haixi Zhang</strong></p>
                            <p>Haixi and I discussed the individual effects of <code>Kp</code>, <code>Ki</code>, and <code>Kd</code> on the robot’s behavior. He also shared valuable tuning techniques, which helped improve the PID parameter selection process.</p>
                                           


                        </div><!-- /container-fluid -->
                    </div><!-- /modal-body -->

                    <!-- Modal 底部 -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CLOSE</button>
                    </div>

                </div><!-- /modal-content -->
            </div><!-- /modal-dialog -->
        </div>
                <!-- Here is the code for LAB 6 report -->
        <div class="modal fade" id="lab6Modal" tabindex="-1" aria-labelledby="lab6ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content border-0 shadow">

                    <!-- Modal 头部 -->
                    <div class="modal-header bg-light">
                        <h5 class="modal-title fw-bold" id="lab1ModalLabel">Lab 6  Orientation Control</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <!-- Modal 主体：通过 p-4 增加内边距，max-height: 80vh 和 overflow-y: auto 用于可滚动 -->
                    <div class="modal-body p-4" style="max-height: 80vh; overflow-y: auto;">

                        <!-- 可以在内部再包一层容器，便于统一排版 -->
                        <div class="container-fluid">

                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Lab 6: Orientation Control</h2>
                            <h2>Objective</h2>
                            <p>The goal of this lab is to gain experience with orientation PID control using the IMU. In Lab 5, PID control was applied to regulate wall distance using ToF sensors. In this lab, the focus will shift to controlling the robot's yaw using the IMU. Similar to the previous lab, you are free to choose the controller that best suits your system.</p>
                            
                            <h2>Parts Required</h2>
                            <ul>
                                <li>1 x Fully assembled robot, with Artemis, TOF sensors, and an IMU.</li>
                            </ul>
                            
                            

                            
                            <hr class="my-4"/><!-- 分割线 -->
                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Prelab: Bluetooth Activation, Data Storage and Transmission</h2>
                            <h3 class="text-center mb-4">Bluetooth Activation</h3>
                            <p>Lab 6 is very similar to Lab 5, so I decided to follow the same approach.</p>

                            <p>To enable the robot to start via Bluetooth, I set a flag named <code>pid_imu_active</code> in the Arduino code. I also created a function called <code>pid_control_IMU()</code> and placed it inside the <code>loop</code>. When <code>pid_imu_active = 1</code>, the <code>pid_control_IMU()</code> function executes.</p>
                            
                            <p>Additionally, <code>pid_control_IMU()</code> receives <code>Kp</code>, <code>Ki</code>, and <code>Kd</code> values, as well as <code>target_angle</code>, from the Python side.</p>
                            
                            <p>Below is a screenshot of the relevant code:</p>                            
                            <!-- 图片区容器 -->                       
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab6/pidcase.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab6/pidloop.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <h4>Preventing Data Drift: <code>calibrateGyro()</code></h4>

                            <p>Unlike Lab 5, in this lab, I added the function <code>calibrateGyro()</code> when executing the <code>PID_IMUcontrol</code> case.</p>
                            
                            <p>The reason for this addition was that after reviewing the tutorial on the <a href="https://fastrobotscornell.github.io/FastRobots-2025/tutorials/dmp.html" target="_blank">Digital Motion Processor (DMP)</a>, I successfully implemented DMP.</p>
                            
                            <p>However, the results I obtained are shown in the following video:</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/lKM9UZ3V9Kw"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <p>It can be observed that under DMP, the robot's roll remains very stable, but pitch and yaw continuously increase (data drift). I believe this is due to the continuous increase in Z-axis data, which causes yaw to keep increasing and subsequently affects pitch.</p>

                            <p>To address this issue, I implemented <code>calibrateGyro()</code> for calibration. The relevant code is shown below:</p>

                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab6/calibrateGyro.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>I sampled the Z-axis data 50 times and calculated the average. This average value represents the offset of the Z-axis that needs to be calibrated.</p>

                            
                            <p><strong><em>Question: Why is only Z-axis (Yaw) drift corrected in Gyro Bias Calibration, while X (Roll) and Y (Pitch) are not adjusted?</em></strong></p>
                            
                            <p><strong><em>Answer: Z-axis (Yaw) drift is the most severe</em></strong></p>
                            <ul>
                                <li>Pitch (Y) and Roll (X) can be corrected using the accelerometer, as gravity provides a stable reference direction.</li>
                                <li>Yaw (Z) cannot be corrected using the accelerometer, since the accelerometer detects linear acceleration but not rotational movement.</li>
                                <li>Z-axis drift accumulates over time, eventually causing the Yaw angle to become completely inaccurate.</li>
                            </ul>
                            
                            <p>The specific implementation of the <code>pid_control_IMU()</code> function and the usage of PID will be explained in detail in the following sections.</p>


                            <h3 class="text-center mb-4">Data Storage and Transmission</h3>
                            <p>For data storage and transmission, Lab 6 fully follows the approach used in Lab 5. Therefore, detailed information can be referenced in my Lab 5 report. Here, I will only present the relevant code for data storage and transmission.</p>
                            <p>Below is the Arduino-side code:</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab6/arduino1.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab6/arduino2.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>Below is the Python-side notification code and a running example:</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab6/python1.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab6/python2.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>






                            


                            <hr class="my-4"/>
                            <h2 class="text-center mb-4">PID Control</h2>
                            <h3 class="text-center mb-4">PID Introduction</h3>
                            <p>PID (Proportional-Integral-Derivative) control is a widely used algorithm in robotics, automation, and industrial systems. In this lab, PID is applied to IMU-based orientation control, ensuring precise and stable yaw adjustments by continuously modifying the system's output based on error feedback.</p>

                            <ul>
                                <li><strong>Proportional (P):</strong> The proportional term applies a correction proportional to the yaw error. A higher proportional gain (<code>Kp</code>) results in a faster response but may cause oscillations.</li>
                                <li><strong>Integral (I):</strong> The integral term accumulates past yaw errors to eliminate steady-state drift. A higher integral gain (<code>Ki</code>) helps reduce offset but can introduce instability.</li>
                                <li><strong>Derivative (D):</strong> The derivative term predicts future yaw errors by analyzing the rate of change. A higher derivative gain (<code>Kd</code>) helps dampen oscillations and improves stability.</li>
                            </ul>
                            
                            <p>The control output <code>u(t)</code> is given by:</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab5/PIDformula.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            
                            
                            
                            <h3 class="text-center mb-4">PID Implementation</h3>
                            <p>In this section, I will explain how I implemented PID control in the <code>pid_control_IMU()</code> function.</p>

                            <p>Based on the formula given in the previous section, I computed the values for <strong>P</strong>, <strong>I</strong>, <strong>D</strong>, and <strong>error</strong>. The sum of these terms (<code>P + I + D</code>) was used as the control output, which serves as the input to the motor.</p>

                            <p>The relevant code is shown below:</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab6/PID_IMU.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <p>These constraints help prevent excessive values that could destabilize the system:</p>
                            <ul>
                                <li><code>int correction = constrain(control_output, -135, 135);</code> ensures that the motor speed remains within a safe operating range, preventing saturation or excessive speed.</li>
                                <li><code>integral = constrain(integral, -500, 500); </code> limits the accumulation of the integral term, mitigating integral windup, which can cause instability.</li>
                            </ul>
                            <p>In this lab, I obtained the current yaw value using the <code>get_yaw()</code> function. I implemented <code>get_yaw()</code> using <a href="https://fastrobotscornell.github.io/FastRobots-2025/tutorials/dmp.html" target="_blank">the DMP method</a>. However, the readings from my <code>get_yaw()</code> method always had a delay of approximately 0.3 seconds. Fortunately, I successfully resolved this issue, and the detailed solution is discussed in the <strong>Discussion on Sampling Rate and Time</strong> section.</p>
                            <p>Here is the code of <code>get_yaw():</code></p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab6/yaw.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <h3 class="text-center mb-4"> PID Parameter Tuning and Results</h3>
                            <p>In this section, I will attempt to transmit different <code>Kp</code>, <code>Ki</code>, and <code>Kd</code> values to the robot to achieve stopping distances of 304mm and 204mm from the wall.</p>

                            <p><strong>Final Conclusion:</strong></p>
                            <p><code>Kp = 4</code>, <code>Ki = 0.0001</code>, <code>Kd = 800</code> produced the best results.</p>
                            <p><strong>Procedure:</strong></p>
                            <p>First, I tested <code>Kp = 6</code>, <code>Ki = 0</code>, and <code>Kd = 0</code>. I observed an overshoot phenomenon, where the robot continuously oscillated near the target instead of stabilizing. Additionally, the deceleration was too slow, preventing the robot from stopping properly.</p>
                            <p>Below are the related video and data visualization:</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/20x9WL2MQ_w"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab6/6,0,0,90.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>From the video, it can be seen that the car keeps oscillating back and forth and is unable to stop at the 90-degree angle.</p>
                            <p>To improve the slow deceleration and reduce oscillations, I adjusted the parameters to <code>Kp = 4</code>, <code>Ki = 0.0001</code>, <code>Kd = 800</code>.</p>
                            <p>After multiple attempts, I found that the car performed best when Kd = 800. The reason for such a large Kd value is that I used tape to stick the car's wheels, significantly reducing friction, making it more difficult for the car to maintain a specific direction. However, without the tape, the car struggles to resist friction, so using the tape is necessary.</p>
                            <p>Below are the related video and data visualization:</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/b5_Hjnqko44"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab6/2.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>From the video, it can be seen that the car rapidly rotated several times before stabilizing at a 90-degree angle. I believe there are several reasons for this result:</p>
                            <ol>
                                <li><code>get_yaw()</code> sometimes generates noise (sudden data changes), causing the car to misjudge the angle.</li>
                                <li>Friction is too low, and the motor speed is too high.</li>
                            </ol>
                            <p>After limiting the motor speed, the car became more stable. I believe that using Kalman filtering in Lab 7 will help improve the noise issue.</p>

                            <p>The following shows the car's performance and data visualization after optimization, using the same parameters when <code>target_angle = 0</code>.</p>

                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                    src="https://www.youtube.com/embed/53OQkPAuDwQ"
                                    title="YouTube video"
                                    allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab6/4,0001,800.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>It can be seen that even when an external force forces the car to change direction, it can promptly correct itself. The experiment was successful!</p>

  



                            <hr class="my-4"/>
                            <h2>Discussion on Sampling Rate and Time</h2>
                            <p>In Lab 5, I encountered an issue with DMP reading delays: after changing the car's direction, the DMP would take about 0.3 seconds to update the output angle. This issue troubled me for nearly three days. Later, after checking the tutorial, I found that the following code was crucial:</p>

                            <pre>
                            success &= (myICM.setDMPODRrate(DMP_ODR_Reg_Quat6, 4) == ICM_20948_Stat_Ok);
                            </pre>
                            
                            <p>In the example code, the original line was:</p>
                            
                            <pre>
                            success &= (myICM.setDMPODRrate(DMP_ODR_Reg_Quat6, 0) == ICM_20948_Stat_Ok);
                            </pre>
                            
                            <p>However, this setting caused the reading speed to be too slow, and the DMP queue could get filled up, leading to severe DMP delays. By reducing the DMP output rate, the Artemis loop processes data faster than the DMP generates it, preventing the queue from becoming overloaded.</p>
                            
                            <p>The relevant code is shown below:</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab6/DMP.png" 
                                            alt="blink" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>

                    



                            <hr class="my-4"/>
                            <h2>Tasks for 5000-Level Students</h2>
                            <p>Integral wind-up occurs when the integral term in a PID controller accumulates excessive error during long periods of saturation (when the actuator is at its limit). This can cause significant overshoot, slow response times, and instability. Without wind-up protection, the controller may take a long time to recover, especially when there are constraints such as motor speed limits or varying floor surfaces with different friction coefficients.</p>

                            <p>For example, if the robot starts on a slippery surface and then moves onto a high-friction surface, the integral term may have already accumulated a large value, leading to excessive correction that destabilizes the system. Wind-up protection helps mitigate this issue by preventing the integral term from growing beyond a certain threshold.</p>
                            
                            <h4>Implementation of Wind-Up Protection</h4>
                            <p>To prevent integral wind-up, I implemented a constraint on the integral term, ensuring it remains within a predefined range:</p>
                            
                            <pre>
                            integral = constrain(integral, -500, 500);
                            </pre>
                            
                            <p>Additionally, I reset the Speed term when the control output reaches the actuator limit:</p>
                            
                            <pre>
                                int correction = constrain(control_output, -135, 135);
                            </pre>
                            <hr class="my-4"/>
                            <h2>Summary:</h2>
                            <p>In this lab, I applied PID to direction control and learned how to minimize the impact of noise on the output.</p>
                                            


                        </div><!-- /container-fluid -->
                    </div><!-- /modal-body -->

                    <!-- Modal 底部 -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CLOSE</button>
                    </div>

                </div><!-- /modal-content -->
            </div><!-- /modal-dialog -->
        </div>
                    <!-- Lab 7 Modal -->
        <div class="modal fade" id="lab7Modal" tabindex="-1" aria-labelledby="lab7ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content border-0 shadow">
        
                <div class="modal-header bg-light">
                <h5 class="modal-title fw-bold" id="lab7ModalLabel">Lab 7: Kalman Filter</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
        
                <div class="modal-body p-4" style="max-height: 80vh; overflow-y: auto;">
                <div class="container-fluid">
                    <h2 class="text-center mb-4">Lab 7: Kalman Filter</h2>
        
                    <h2>Objective</h2>
                    <p>The goal of this lab is to implement a Kalman Filter to enhance distance estimation using the ToF sensor. This enables the robot to move faster towards a wall while still making accurate stop/turn decisions.</p>
        
                    <h2>Parts Required</h2>
                    <ul>
                    <li>1 x Fully assembled robot, with Artemis, TOF sensors, and an IMU.</li>
                    </ul>
        
                    <hr class="my-4"/>
                    <h2>Step 1: Estimate Drag and Momentum</h2>
                    <p>Below is the function code on the Arduino side and the command sending code on the Python side.</p>
                    <div class="container my-4">
                        <div class="row g-4 justify-content-center">
                            <div class="col-md-8">
                            <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                <img src="assets/img/lab7/DM Arduino.png" alt="Step response data" class="img-fluid rounded" style="width: 100%; height: auto;">
                            </div>
                            </div>
                        </div>
                        </div>
                    <div class="container my-4">
                        <div class="row g-4 justify-content-center">
                            <div class="col-md-8">
                            <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                <img src="assets/img/lab7/DM python.png" alt="Step response data" class="img-fluid rounded" style="width: 100%; height: auto;">
                            </div>
                            </div>
                        </div>
                        </div>
                    <p>From the images above, it can be seen that I drove the robot toward the wall with a fixed PWM input (130), and recorded both the ToF distance and estimated speed. Using this data, I plotted raw distance and computed speed over time. I then estimated:</p>
                    <ul>
                    <li><strong>Steady-state speed (v<sub>ss</sub>)</strong>: ~2509 mm/s</li>
                    <li><strong>Normalized input (u)</strong>: 130 / 255</li>
                    <li><strong>Drag (d)</strong> and <strong>momentum (m)</strong>: Calculated using exponential model and 90% rise time</li>
                    </ul>
                    <p>The data was saved locally in array format for further analysis.</p>
        
                    <!-- 图 1 -->
                    <div class="container my-4">
                    <div class="row g-4 justify-content-center">
                        <div class="col-md-8">
                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                            <img src="assets/img/lab7/imag1.png" alt="Step response data" class="img-fluid rounded" style="width: 100%; height: auto;">
                        </div>
                        </div>
                    </div>
                    </div>

                    <p>The speed curve shows a downward trend because when the current distance is less than 100, I reverse the car’s motor at a speed of 255 to protect it instead of letting it crash into the wall.</p>

                    <hr class="my-4"/>
                    <h2 class="text-center mb-4">Step2: System Parameter Estimation</h2>

                    <p>In this section, I walk through how I calculated the drag coefficient <strong>d</strong> and mass-like parameter <strong>m</strong> based on the data I showed on the <strong>Step 1.</strong> </p>

                    <h4>Units</h4>
                    <ul>
                    <li>Time: μs (microseconds)</li>
                    <li>Speed: mm/s</li>
                    <li>ToF Distance: mm</li>
                    </ul>

                    <h4>Max Speed Point:</h4>
                    <p><code>Time = 1870261.0 μs</code>, <code>Speed = 2509.0 mm/s</code> → steady-state speed <strong>v<sub>ss</sub> = 2509.0 mm/s</strong></p>

                    <h4>1: Calculate 90% of Steady-State Speed</h4>
                    <pre><code>v₀.₉ = 0.9 × 2509.0 = <strong>2258.1 mm/s</strong></code></pre>

                    <h4>2: Find when speed crosses 2258.1 mm/s</h4>
                    <table class="table table-bordered w-75 mx-auto text-center">
                    <thead class="table-light">
                        <tr><th>Time (μs)</th><th>Speed (mm/s)</th><th>Note</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>1869949.0</td><td>2192.0</td><td>❌ Below</td></tr>
                        <tr><td>1870053.0</td><td>2278.0</td><td>✅ Above</td></tr>
                    </tbody>
                    </table>
                    <p>So <code>v = 2258.1</code> is between these two timestamps.</p>

                    <h4>3: Linear Interpolation for t₀.₉</h4>
                    <pre><code>
                    t₁ = 1869949.0 μs, v₁ = 2192.0
                    t₂ = 1870053.0 μs, v₂ = 2278.0

                    Δv = 2278.0 − 2192.0 = 86.0
                    Δt = 104.0 μs
                    v_diff = 2258.1 − 2192.0 = 66.1

                    t₀.₉ = t₁ + (v_diff / Δv) × Δt
                        ≈ 1869949.0 + (66.1 / 86.0) × 104.0
                        ≈ <strong>1870029.0 μs</strong>
                    </code></pre>

                    <h4>4: Compute Rise Time to 90%</h4>
                    <pre><code>
                    Start time = 1869013.0 μs

                    t₀.₉ − t_start = 1870029.0 − 1869013.0 = 1016.0 μs = <strong>0.001016 s</strong>
                    </code></pre>

                    <h4>5: Compute d and m</h4>

                    <pre><code>
                    Input PWM = 130 → u = 130 / 255 ≈ 0.5098

                    From u = d ⋅ v_ss  ⇒  d = u / v_ss = 0.5098 / 2509.0 ≈ <strong>0.0002031</strong> (1/s)

                    m = −d ⋅ t₀.₉ / ln(0.1)
                    = −0.0002031 × 0.001016 / (−2.3026)
                    ≈ <strong>8.96 × 10⁻⁸</strong>
                    </code></pre>

                    <p>These parameters were then used to construct my state-space model and discretize the Kalman Filter matrices.</p>
                    <p>Below is how I implemented the above process using Python code.</p>
                    <div class="container my-4">
                        <div class="row g-4 justify-content-center">
                          <div class="col-md-8">
                            <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                              <img src="assets/img/lab7/caculate python.png" 
                                   alt="Kalman Filter Estimated vs Raw TOF (Position only)" 
                                   class="img-fluid rounded" 
                                   style="width: 100%; height: auto;">
                            </div>
                          </div>
                        </div>
                      </div>



        
                    <hr class="my-4"/>
                    <h2>Step 3: Implement and Test Kalman Filter in Python</h2>
                    
                    <p>
                    To verify the effectiveness of the Kalman Filter, I implemented a 1D position-only Kalman Filter in Python using my raw ToF data collected in the step response test.
                    </p>
                    
                    <h4>State Space Model</h4>
                    <p>My state vector was simply:</p>
                    <pre><code>
                    x = [position]
                    A = [[1]]
                    B = [[Δt]]
                    C = [[1]]
                    </code></pre>
                    <p>
                    The input <code>u</code> was the normalized PWM value (130 / 255), and the observation <code>y</code> was the raw ToF measurement. The model assumes constant velocity during each small time step Δt.
                    </p>
                    
                    <h4>Noise Covariance Matrices</h4>
                    <p>
                    I empirically set the process and sensor noise as:
                    </p>
                    <pre><code>
                    Process noise variance (σ₁²) = 10² = 100
                    Sensor noise variance (σ₂²) = 20² = 400
                    
                    Sigma_u = [[100]]
                    Sigma_z = [[400]]
                    </code></pre>
                    
                    <h4>Filtering Loop</h4>
                    <p>
                    For every ToF measurement, I called the Kalman Filter update function:
                    </p>
                    <pre><code>
                    for each time step i:
                        y = observed ToF at time i
                        u = constant normalized PWM
                        mu, sigma = kf(mu, sigma, u, y)
                    </code></pre>
                    <p>
                    This produced a smoother estimate of the true position at each time step, as shown below.
                    </p>
                    
                    <!-- 图像占位：KF vs Raw (Position Only) -->
                    <div class="container my-4">
                      <div class="row g-4 justify-content-center">
                        <div class="col-md-8">
                          <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                            <img src="assets/img/lab7/img_kf_position.png" 
                                 alt="Kalman Filter Estimated vs Raw TOF (Position only)" 
                                 class="img-fluid rounded" 
                                 style="width: 100%; height: auto;">
                          </div>
                        </div>
                      </div>
                    </div>
                    <p>Below is the code implementation of the above description.</p>
                    <div class="container my-4">
                        <div class="row g-4 justify-content-center">
                          <div class="col-md-8">
                            <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                              <img src="assets/img/lab7/KFpython.png" 
                                   alt="Kalman Filter Estimated vs Raw TOF (Position only)" 
                                   class="img-fluid rounded" 
                                   style="width: 100%; height: auto;">
                            </div>
                          </div>
                        </div>
                      </div>
                    
                    <h4>Observation</h4>
                    <ul>
                      <li>The Kalman Filter output showed a much smoother, physically consistent trajectory.</li>
                      <li>This gives the PID controller a better input signal for distance regulation.</li>
                      <li>Although there is some discrepancy between the raw TOF data and the Kalman filter output data, I believe it is acceptable.</li>

                    </ul>
                    
                    
        
                    <hr class="my-4"/>
                    <h2>Step 4: Implement Kalman Filter on Artemis</h2>
                    <p>
                        First, I followed the content from the tutorial section 
                        <em>"4. Implement the Kalman Filter on the Robot"</em> 
                        (<a href="https://fastrobotscornell.github.io/FastRobots-2025/labs/Lab7.html" target="_blank">https://fastrobotscornell.github.io/FastRobots-2025/labs/Lab7.html</a>) 
                        and Step 3: <em>"Implement and Test Kalman Filter in Python"</em> in my report to import the BLA library and related parameters.
                      </p>
                      <div class="container my-4">
                        <div class="row g-4 justify-content-center">
                            <div class="col-md-8">
                            <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                <img src="assets/img/lab7/import.png" alt="KF integrated with PID" class="img-fluid rounded" style="width: 100%; height: auto;">
                            </div>
                            </div>
                        </div>
                        </div>
                        <p>
                            Then, I implemented a Kalman filter using the <code>kalman_update</code> function to make the TOF data smoother. 
                            I also modified the code in the <code>PID_control()</code> function from Lab 5: 
                            after reading the sensor data, I use the <code>kalman_update</code> function to obtain the filtered distance, 
                            and I use this filtered distance to calculate the error instead of the original <code>current_distance</code>.
                          </p>
                          <div class="container my-4">
                            <div class="row g-4 justify-content-center">
                                <div class="col-md-8">
                                <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                    <img src="assets/img/lab7/gai.png" alt="KF integrated with PID" class="img-fluid rounded" style="width: 100%; height: auto;">
                                </div>
                                </div>
                            </div>
                            </div>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab7/kalman.png" alt="KF integrated with PID" class="img-fluid rounded" style="width: 100%; height: auto;">
                                    </div>
                                    </div>
                                </div>
                                </div>
                            <p>Finally, I still used the best PID values obtained from Lab 5, namely Kp: 0.1, Ki: 0.0001, and Kd: 25, and let the car try to stop at a distance of 104 mm from the wall (which is very close—I wanted to see how well the Kalman Filter performs).</p>
                            <p>The result is visualized in the figure below.</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <img src="assets/img/lab7/result.png" alt="KF integrated with PID" class="img-fluid rounded" style="width: 100%; height: auto;">
                                    </div>
                                    </div>
                                </div>
                                </div>
                                <p>
                                    As shown clearly in the figure, the data after applying the Kalman filter is very smooth, indicating a successful experiment.
                                  </p>
                                  
                    <p>Below is the video of my robot successfully stopping 104mm from the wall using Kalman-filtered ToF values as input to the PID controller:</p>
        
                    <!-- 视频区域 -->
                    <div class="mx-auto" style="max-width: 600px;">
                    <div class="ratio ratio-16x9 mb-3">
                        <iframe src="https://www.youtube.com/embed/Evz-5G_1IVQ" title="Kalman Filter Robot Demo" allowfullscreen></iframe>
                    </div>
                    </div>
        
                    <hr class="my-4"/>
                    <h2>Summary</h2>
                    <p>In this lab, I successfully implemented and validated a 2D Kalman Filter for ToF sensor fusion. I integrated it with PID control on the robot and demonstrated smoother, faster, and more accurate behavior compared to raw measurements alone.</p>
                </div>
                </div>
        
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CLOSE</button>
                </div>
        
            </div>
            </div>
        </div>
                    <!-- Lab 8 Modal -->
        <div class="modal fade" id="lab8Modal" tabindex="-1" aria-labelledby="lab8ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content border-0 shadow">
                    <div class="modal-header bg-light">
                        <h5 class="modal-title fw-bold" id="lab7ModalLabel">Lab 8: Task B - Drift</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
        
                    <div class="modal-body p-4" style="max-height: 80vh; overflow-y: auto;">
                        <div class="container-fluid">
                            <h2 class="text-center mb-4">Lab 8 Stunts! Task B - Drift</h2>
        
                            <h2>Task Description</h2>
                            <p>The robot must start at the designated line (< 4m from the wall), drive forward at high speed, and initiate a 180° turn when within 3ft (914mm) of the wall. Successful execution requires fast reaction, stable turning, and accurate distance sensing. The challenge includes implementing precise timing for the drift maneuver while optionally using Kalman Filter predictions during sensor gaps.</p>
        
                            <h2>System Components</h2>
                            <ul>
                                <li>Artemis board</li>
                                <li>VL53L1X ToF sensor</li>
                                <li>ICM20948 IMU</li>
                                <li>DC Motors (controlled via PWM)</li>
                                <li>BLE module</li>
                                <li>Kalman Filter & PID Controller</li>
                            </ul>
                            <hr class="my-4"/>
                            <h2>System Design: State Machine</h2>
                            <p>The robot operates under a state machine with the following states:</p>
                            <ol>
                                <li><code>STATE_FORWARD</code>: The robot moves forward at high speed.</li>
                                <li><code>STATE_TURNING_AT_X</code>: Upon reaching a target distance, the robot performs a 180° turn.</li>
                                <li><code>STATE_STOPPED</code>: The robot stops after completing the round trip.</li>
                            </ol>
                            <!-- 图片区容器 -->                       
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab8/system.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>The following is a screenshot of the code I implemented for state machine transitions. This code is located in the program's <code>loop</code> function.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab8/stateschange.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab8/states.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>Note: In the code, I also defined <code>state_backward</code>, but in reality, it calls the same function as <code>state_forward</code>. Therefore, in the initial state transition diagram, I represented both as Forward States. This design allows for better distinction between the pre-turn and post-turn states, making debugging more convenient.</p>
                    

                            <hr class="my-4"/>
                            <h2>Arduino Data Reception Format</h2>
                            <p>In this experiment, the Arduino will receive 7 parameters from the Python side. These are:<br>
                            ToF Sensor PID parameters: <code>Kp_tof</code>, <code>Ki_tof</code>, <code>Kd_tof</code><br>
                            IMU Sensor PID parameters: <code>Kp_imu</code>, <code>Ki_imu</code>, <code>Kd_imu</code><br>
                            Target distance: <code>target_distance</code>
                            </p>
                            <p>The following is a screenshot of the code</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab8/inputvalue.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>

                                
                            <hr class="my-4"/>
                            <h2>ToF Module and IMU Module</h2>
                            <p>In this experiment, the ToF module and IMU module are based on <a href="https://nanshanvv.github.io/FastRobots/">Lab 7: Kalman Filter</a> and <a href="https://nanshanvv.github.io/FastRobots/">Lab 6: Orientation Control</a>, respectively (URLs to be inserted). For detailed code information, please refer to these two lab reports.</p>
                            <p>The following are partial code screenshots.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab8/1.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab8/2.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab8/3.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <p>It is important to note that the ToF sensor, IMU, and Artemis Board loop all operate at different frequencies. Therefore, it is necessary to add <code>delay()</code> functions to certain data transmission segments to appropriately reduce their frequency and ensure accurate data communication.</p>
                            
                            <p>Additionally, during the experiment, I encountered two issues: invalid initial sensor readings and IMU data drift. The following two sections explain how I addressed these problems.</p>
                            
                            
                            <hr class="my-4"/>
                            <h2>ToF Initialization Issue and Fix</h2>
                            <p>During the experiment, I noticed that many times the car would directly enter the 180 degree turning state, skipping the initial forward state. This behavior is shown in the video below.</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                        src="https://www.youtube.com/embed/omF8Kr02fg0"
                                        title="Funny Drift Bot"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <p>I checked the sensor data and found that the first 20 readings were extremely low (around 0–200), which caused the car to mistakenly believe it had already reached the target distance and immediately triggered the second state machine (180-degree rotation).</p>

                            <p>I believe this issue occurred because the sensor requires some time to initialize after calling <code>distanceSensor.startRanging();</code> before it can produce accurate values. To address this, I added the following code in the <code>pid_control()</code> function of the ToF module:</p>
                            
<pre><code>if (skip_counter &lt; 25) {
skip_counter++;
return;  
}</code></pre>
                            
                            <p>These few lines of code successfully resolved the problem.</p>
                            


                            
                            <hr class="my-4"/>
                            <h2>Code Execution and PID Tuning</h2>
                            <p>I reused the PID values obtained from Lab 6 and Lab 7 for the experiment.</p>

                            <p><strong>Experiment 1:</strong><br>
                            The input data I used is shown in the image below.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab8/input1.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p><strong>Experimental Result:</strong><br></p>
                                <div class="mx-auto" style="max-width: 600px;">
                                    <div class="ratio ratio-16x9 mb-3">
                                        <iframe
                                            src="https://www.youtube.com/embed/8qBpHmHOO7c"
                                            title="Funny Drift Bot"
                                            allowfullscreen>
                                        </iframe>
                                    </div>
                                </div>

                            <p>I observed that the car's IMU caused it to keep rotating without stopping, indicating a drift issue in the sensor data. To address this, I added the following code at the beginning of the IMU PID control logic:</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab8/IMU.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <p>With this piece of code, I performed initial bias calibration on the gyroscope's Z-axis (Yaw direction), which effectively prevented data drift.</p>

                            
                            <p><strong>Experiment 2:</strong><br>
                                The input data I used is shown in the image below.</p>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-4 justify-content-center">
                                        <!-- 让列占满全宽 -->
                                        <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                            <!-- 去掉 max-height，改为 width: 100% -->
                                            <img src="assets/img/lab8/input2.png" 
                                                alt="Artemis and IMU" 
                                                class="img-fluid rounded" 
                                                style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                        </div>
                                    </div>
                                </div>
                                <p><strong>Experimental Result:</strong></p>
                                <div class="mx-auto" style="max-width: 600px;">
                                    <div class="ratio ratio-16x9 mb-3">
                                        <iframe
                                            src="https://www.youtube.com/embed/V0NmnczGdlM"
                                            title="Funny Drift Bot"
                                            allowfullscreen>
                                        </iframe>
                                    </div>
                                </div>

                                
                                <p>As shown in the video above, the car rotated several times after reaching the target position before returning, which basically achieved the goal of the experiment. However, the fact that it took many rotations to stabilize in the 180-degree direction indicates that the <code>Kp</code> value was too high and the <code>Kd</code> value was too low. Therefore, I adjusted the parameters <code>Kp_imu</code> and <code>Kd_imu</code> accordingly.</p>
                                
                                <p><strong>Experiment 3:</strong><br>
                                    The input data I used is shown in the image below.</p>
                                    <div class="container my-4">
                                        <!-- 图片区容器 -->
                                        <div class="row g-4 justify-content-center">
                                            <!-- 让列占满全宽 -->
                                            <div class="col-md-8">
                                            <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                <!-- 去掉 max-height，改为 width: 100% -->
                                                <img src="assets/img/lab8/input3.png" 
                                                    alt="Artemis and IMU" 
                                                    class="img-fluid rounded" 
                                                    style="width: 100%; height: auto; object-fit: contain;">
                                            </div>
                                            </div>
                                        </div>
                                    </div>
                                    <p><strong>Experimental Result:</strong></p>
                                    <div class="mx-auto" style="max-width: 600px;">
                                        <div class="ratio ratio-16x9 mb-3">
                                            <iframe
                                                src="https://www.youtube.com/embed/7CtesUoaLLw"
                                                title="Funny Drift Bot"
                                                allowfullscreen>
                                            </iframe>
                                        </div>
                                    </div>

                                    <p>As shown in the video above, the car rotated 180 degrees and returned after reaching the target position, successfully achieving the goal of this experiment.</p>
                                    <p>The following are the sensor data.</p>
                                    <div class="container my-4">
                                        <!-- 图片区容器 -->
                                        <div class="row g-4 justify-content-center">
                                            <!-- 让列占满全宽 -->
                                            <div class="col-md-8">
                                            <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                <!-- 去掉 max-height，改为 width: 100% -->
                                                <img src="assets/img/lab8/sensor.png" 
                                                    alt="Artemis and IMU" 
                                                    class="img-fluid rounded" 
                                                    style="width: 100%; height: auto; object-fit: contain;">
                                            </div>
                                            </div>
                                        </div>
                                    </div>
                                    <p>It can be seen that the sensor data is very smooth thanks to the Kalman filter. </p>
                                    <p>In the graph, the sensor data suddenly jumps from 400 to 1600 (timestamp: 96500 to 101000) because during this period the car is in the 180-degree rotation state, during which no sensor data is returned. After the rotation is complete and the system enters the next state, new sensor data is received around timestamp 101000. Since Python automatically connects data points in the plot, a straight line appears between timestamps 96500 and 101000.</p>

                            
                            <hr class="my-4"/>
                            <h2>Funniest Moment – Dancing a Waltz with My Robot Car</h2>
                            <p>During one of the tests, incorrect PID tuning and yaw drift caused the robot to spin endlessly.<br>
                                Interestingly, the robot started spinning along with me, as if we were dancing a waltz together. It was so much fun!</p>
                            <p>I quickly took out my phone to record the moment — it was definitely the most entertaining part of the entire experiment.</p>
                            <p>The background music in the video is <strong><em>Chopin's Waltz Op. 64 No. 3 in F major</em></strong> — one of my favorite piano pieces. I hope you enjoy it too.</p>


                                
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                        src="https://www.youtube.com/embed/vtlNMNFgbq8"
                                        title="Funny Drift Bot"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            
                            <hr class="my-4"/>
                            <h2>Conclusion</h2>
                            <p>This lab integrates BLE communication, Kalman filtering, state machines, and PID control into a full pipeline for fast and autonomous maneuvering. The robot successfully detects the wall, performs a 180° turn using IMU yaw control, and returns to the origin. The implementation strengthened my understanding of sensor fusion and real-time embedded control.</p>
        
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CLOSE</button>
                    </div>
                </div>
            </div>
        </div>
                    <!-- Lab 9 Modal -->
        <div class="modal fade" id="lab9Modal" tabindex="-1" aria-labelledby="lab9ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content border-0 shadow">
                    <div class="modal-header bg-light">
                        <h5 class="modal-title fw-bold" id="lab7ModalLabel">Lab 9 Mapping</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
        
                    <div class="modal-body p-4" style="max-height: 80vh; overflow-y: auto;">
                        <div class="container-fluid">
                            <h2 class="text-center mb-4">Lab 9 Mapping</h2>
        
                            <h2>Objective</h2>
                            <p>
                              The goal of this lab is to create a 2D map of a static environment—specifically, the front room of the lab—which will be used in later localization and navigation tasks.
                              To construct the map, the robot is placed at several pre-defined positions and performs a 360-degree rotation at each one, collecting Time-of-Flight (ToF) sensor readings throughout the turn.
                            </p>
                            
                            <h2>Method</h2>
                            <p>
                              To ensure accurate and evenly distributed measurements in angular space, I implemented PID control on orientation, using integrated gyroscope data (via the DMP module) to maintain and adjust heading.
                              This closed-loop control method allowed for consistent angular speed and precise yaw estimation throughout the rotation.
                              At each time step, the robot recorded multiple ToF distance measurements at different angles relative to its position.
                            </p>
                            
                            <h2>System Components</h2>
                            <ul>
                                <li>1 × Fully assembled robot, with Artemis, TOF sensors, and an IMU.</li>
                              </ul>
                              
                            <hr class="my-4"/>
                            <h2>Robot Control: Mapping Function Using Orientation PID Control</h2>
                            <p>
                                In Lab 6, I implemented orientation PID control using DMP values, which allowed the robot to rotate to a specified angle and stabilize. 
                                Therefore, I decided to reuse the functionality already developed in Lab 6 to implement the mapping function.
                                Below is the key code for my mapping function.
                                </p>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-4 justify-content-center">
                                        <!-- 让列占满全宽 -->
                                        <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                            <!-- 去掉 max-height，改为 width: 100% -->
                                            <img src="assets/img/lab9/command.png" 
                                                alt="Artemis and IMU" 
                                                class="img-fluid rounded" 
                                                style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                        </div>
                                    </div>
                                </div> 

                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab9/1.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div> 
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab9/2.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div> 
                            <p>
                                Through the <code>start_mapping</code> function, I set two flags—<code>mapping_mode</code> and <code>pid_imu_active</code>—to <code>true</code>, enabling the mapping operation to run inside the main loop.
                                </p>
                                
                                <p>
                                For orientation PID control, I used the <code>pid_control_IMU</code> function. The detailed implementation and its underlying principles can be found in my Lab 6 report.
                                </p>
                                
                                <p>
                                In Lab 9, my main approach was to increment a global variable <code>target_yaw</code> by a fixed angle <code>step_angle</code> after each step, allowing <code>pid_control_IMU</code> to determine the desired yaw for each step. I considered the mapping complete when <code>current_step &gt; step_total</code>, indicating the robot had completed a full rotation.
                                </p>
                                
                                <p>
                                Key parameters used:
                                <ul>
                                  <li><strong>step_angle = 24°</strong></li>
                                  <li><strong>step_total = 15 steps</strong></li>
                                </ul>
                                </p>
                                
                                <p>
                                In Lab 9, I will mainly present the following aspects:
                                <ol>
                                  <li>Synchronizing the main loop frequency with the DMP value update rate</li>
                                  <li>Overcoming static friction</li>
                                </ol>
                                </p>
                                
                                
                                <h3>Synchronizing the main loop frequency with the DMP value update rate</h3>
                                <p>
                                    During testing, I found that the IMU readings contained a lot of noise, such as <strong>NaN</strong> values and <strong>0</strong> values. I believe this issue was caused by the <strong>IMU data update rate being slower than the main loop rate</strong>. 
                                    To address this problem, I needed to <strong>synchronize the IMU update rate with the main loop rate</strong>.
                                    </p>
                                    <div class="container my-4">
                                        <!-- 图片区容器 -->
                                        <div class="row g-4 justify-content-center">
                                            <!-- 让列占满全宽 -->
                                            <div class="col-md-8">
                                            <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                <!-- 去掉 max-height，改为 width: 100% -->
                                                <img src="assets/img/lab9/dmp.png" 
                                                    alt="Artemis and IMU" 
                                                    class="img-fluid rounded" 
                                                    style="width: 100%; height: auto; object-fit: contain;">
                                            </div>
                                            </div>
                                        </div>
                                    </div>
                                    <p>
                                        From the comments in the existing code, I found that the current DMP frequency is <strong>27.5 Hz</strong>. 
                                        To make the main loop slightly slower than the DMP update rate and thus reduce the occurrence of <strong>NaN</strong> and <strong>0</strong> values, 
                                        I added the following code to the main loop:
                                        </p>
                                        <div class="container my-4">
                                            <!-- 图片区容器 -->
                                            <div class="row g-4 justify-content-center">
                                                <!-- 让列占满全宽 -->
                                                <div class="col-md-8">
                                                <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                    <!-- 去掉 max-height，改为 width: 100% -->
                                                    <img src="assets/img/lab9/frequency.png" 
                                                        alt="Artemis and IMU" 
                                                        class="img-fluid rounded" 
                                                        style="width: 100%; height: auto; object-fit: contain;">
                                                </div>
                                                </div>
                                            </div>
                                        </div>
                                    <p>
                                        As shown in the code, I used the condition <strong>if (now - lastPID &gt;= 40)</strong> to make the mapping operation run every <strong>40 milliseconds</strong>. 
                                        This means the loop frequency during mapping is approximately <strong>25 Hz</strong>, which is slightly lower than the DMP frequency. 
                                        As a result, the issue of IMU values being <strong>NaN</strong> or <strong>0</strong> was significantly reduced.
                                    </p>
                                
                                    <h3>Overcoming static friction</h3>
                                    <p>During the experiment, I observed the following phenomena:</p>
                                    <div class="mx-auto" style="max-width: 600px;">
                                        <div class="ratio ratio-16x9 mb-3">
                                            <iframe
                                                src="https://www.youtube.com/embed/PwFyvpNLezU"
                                                title="Funny Drift Bot"
                                                allowfullscreen>
                                            </iframe>
                                        </div>
                                    </div>
                                    
                                    <p>
                                        As shown in the video, when the wheels were wrapped with tape, the robot required a slight push to start rotating. 
                                        This indicates that the robot could not overcome <strong>static friction</strong> on its own. 
                                        To address this issue, I added the following code to help the robot overcome the static friction and initiate rotation.
                                        </p>
                                        <div class="container my-4">
                                            <!-- 图片区容器 -->
                                            <div class="row g-4 justify-content-center">
                                                <!-- 让列占满全宽 -->
                                                <div class="col-md-8">
                                                <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                    <!-- 去掉 max-height，改为 width: 100% -->
                                                    <img src="assets/img/lab9/friction.png" 
                                                        alt="Artemis and IMU" 
                                                        class="img-fluid rounded" 
                                                        style="width: 100%; height: auto; object-fit: contain;">
                                                </div>
                                                </div>
                                            </div>
                                        </div>
                                        <p>
                                            Later, I discovered that after adding the code to overcome static friction, the robot was able to rotate successfully even without tape on the wheels, 
                                            and it performed very well. This explains why the robot's wheels no longer have tape in the later videos.
                                            </p>
                                            

                            <hr class="my-4"/>
                            <h2>SEND_DATA Function</h2>
                            <p>
                                I used the <strong>SEND_DATA</strong> command to receive the current angle along with the five collected <strong>ToF</strong> readings. 
                                The detailed code and a sample output are shown below:
                                </p>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-4 justify-content-center">
                                        <!-- 让列占满全宽 -->
                                        <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                            <!-- 去掉 max-height，改为 width: 100% -->
                                            <img src="assets/img/lab9/DataSend.png" 
                                                alt="Artemis and IMU" 
                                                class="img-fluid rounded" 
                                                style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-4 justify-content-center">
                                        <!-- 让列占满全宽 -->
                                        <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                            <!-- 去掉 max-height，改为 width: 100% -->
                                            <img src="assets/img/lab9/Data.png" 
                                                alt="Artemis and IMU" 
                                                class="img-fluid rounded" 
                                                style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                        </div>
                                    </div>
                                </div>
                            <hr class="my-4"/> 
                            <h2>Mapping Process and Results</h2>
                            <p>
                                Within the designated area of the lab, I positioned the robot at four locations: <strong>(-3, -2)</strong>, <strong>(0, 3)</strong>, <strong>(5, 3)</strong>, and <strong>(5, -3)</strong>, 
                                where it performed a full <strong>360-degree rotation</strong> at each point. 
                                During the rotation, the robot recorded <strong>five ToF sensor readings</strong> every <strong>24 degrees</strong>.
                                </p>
                                
                                <p>
                                In this experiment, the PID values that gave the best performance were: 
                                <strong>Kp = 18</strong>, <strong>Ki = 0.0001</strong>, <strong>Kd = 15</strong>.
                                </p>
                                <div class="mx-auto" style="max-width: 600px;">
                                    <div class="ratio ratio-16x9 mb-3">
                                        <iframe
                                            src="https://www.youtube.com/embed/imCDWVN37lg"
                                            title="Funny Drift Bot"
                                            allowfullscreen>
                                        </iframe>
                                    </div>
                                </div>
                                <div class="mx-auto" style="max-width: 600px;">
                                    <div class="ratio ratio-16x9 mb-3">
                                        <iframe
                                            src="https://www.youtube.com/embed/g4kR6Pv41hg"
                                            title="Funny Drift Bot"
                                            allowfullscreen>
                                        </iframe>
                                    </div>
                                </div>
                                
                                <p>
                                    After performing the operation shown in the video at each position, I collected <strong>five ToF readings</strong> at every <strong>24-degree</strong> interval. 
                                    Using this data, I generated the following <strong>polar plots</strong>.
                                </p>
                                <div class="container my-4">
                                    <!-- 图片区容器 -->
                                    <div class="row g-4 justify-content-center">
                                      <!-- 四张图，每行两张，所以每列占6格 -->
                                      <div class="col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                          <img src="assets/img/lab9/3.png" 
                                               alt="Image 1" 
                                               class="img-fluid rounded" 
                                               style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                          <img src="assets/img/lab9/4.png" 
                                               alt="Image 2" 
                                               class="img-fluid rounded" 
                                               style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                          <img src="assets/img/lab9/5.png" 
                                               alt="Image 3" 
                                               class="img-fluid rounded" 
                                               style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                          <img src="assets/img/lab9/6.png" 
                                               alt="Image 4" 
                                               class="img-fluid rounded" 
                                               style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  <p>
                                    Additionally, I used the following code to process the four datasets, <strong>compute the transformation matrices</strong>, 
                                    and <strong>convert the distance sensor measurements to the inertial reference frame of the room</strong>.
                                    </p>
                                    <div class="container my-4">
                                        <!-- 图片区容器 -->
                                        <div class="row g-4 justify-content-center">
                                            <!-- 让列占满全宽 -->
                                            <div class="col-md-8">
                                            <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                <!-- 去掉 max-height，改为 width: 100% -->
                                                <img src="assets/img/lab9/finalcode.png" 
                                                    alt="Artemis and IMU" 
                                                    class="img-fluid rounded" 
                                                    style="width: 100%; height: auto; object-fit: contain;">
                                            </div>
                                            </div>
                                        </div>
                                    </div>
                                    <p>
                                        After plotting the data, I noticed that all the measurements were rotated <strong>30 degrees counterclockwise</strong> in the Cartesian coordinate system. 
                                        To correct this and make the final data more standardized, I added the following lines to the code:
                                        </p>
                                        
                                        <pre><code>
                                        rotation_offset_deg = 30
                                        angle_rad = np.deg2rad(angle_deg + rotation_offset_deg)
                                        </code></pre>
                                        <p>The results are shown in the figure below:</p>
                                        <div class="container my-4">
                                            <!-- 图片区容器 -->
                                            <div class="row g-4 justify-content-center">
                                                <!-- 让列占满全宽 -->
                                                <div class="col-md-8">
                                                <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                    <!-- 去掉 max-height，改为 width: 100% -->
                                                    <img src="assets/img/lab9/final result.png" 
                                                        alt="Artemis and IMU" 
                                                        class="img-fluid rounded" 
                                                        style="width: 100%; height: auto; object-fit: contain;">
                                                </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="container my-4">
                                            <!-- 图片区容器 -->
                                            <div class="row g-4 justify-content-center">
                                                <!-- 让列占满全宽 -->
                                                <div class="col-md-8">
                                                <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                                    <!-- 去掉 max-height，改为 width: 100% -->
                                                    <img src="assets/img/lab9/final.jpeg" 
                                                        alt="Artemis and IMU" 
                                                        class="img-fluid rounded" 
                                                        style="width: 100%; height: auto; object-fit: contain;">
                                                </div>
                                                </div>
                                            </div>
                                        </div>
                                  
                                
                                    

                            
                            <hr class="my-4"/>
                            <h2>Conclusion</h2>
                            <p>In this lab, I successfully built a 2D map of the lab room by collecting ToF measurements at multiple positions while rotating the robot. I used PID control on orientation with integrated gyroscope data to ensure stable and accurate rotations. This method produced evenly spaced sensor readings, leading to a clean and reliable map for future localization and navigation tasks.</p>
        
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CLOSE</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Begin Lab 10 HTML Report Embed -->
        <div class="modal fade" id="lab10Modal" tabindex="-1" aria-labelledby="lab10ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content border-0 shadow">
                    <div class="modal-header bg-light">
                        <h5 class="modal-title fw-bold" id="lab7ModalLabel">Lab 10 Grid Localization using Bayes Filter</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
        
                    <div class="modal-body p-4" style="max-height: 80vh; overflow-y: auto;">
                        <div class="container-fluid">
                            <h2 class="text-center mb-4">Lab 10: Grid Localization using Bayes Filter</h2>
  
                            <h2>Objective</h2>
                            <p>The objective of this lab was to implement a grid-based Bayes Filter to localize a mobile robot using odometry and sensor readings in a discretized environment.</p>
                            <hr class="my-4"/>
                            <h2>Key Concepts</h2>
                            <ul>
                              <li>Belief grids (12x9x18) were used to represent probability distributions over robot poses (x, y, theta)</li>
                              <li>Bayes Filter consists of <strong>prediction</strong> and <strong>update</strong> steps</li>
                              <li>Odometry motion model was applied using Gaussian noise</li>
                              <li>Sensor model compared observed vs. expected 18-dimensional range data</li>
                            </ul>
                            <hr class="my-4"/>
                            <h2>Introduction: Bayes Filter</h2>
                            <p><strong>In robotics, Bayes Filter</strong> is a probabilistic algorithm used for estimating a robot’s position in a known environment by continuously combining two sources of information:</p>

                            <ul>
                            <li><strong>Control input</strong>: how the robot believes it has moved (from odometry);</li>
                            <li><strong>Sensor observation</strong>: what the robot sees (from laser range finders).</li>
                            </ul>

                            <p>At each time step, Bayes Filter performs two essential operations:</p>

                            <ol>
                            <li><strong>Prediction (or motion update)</strong>: It projects the current belief forward based on how the robot has moved.</li>
                            <li><strong>Update (or measurement correction)</strong>: It corrects this belief using actual sensor observations.</li>
                            </ol>

                            <p>The theoretical foundation of the Bayes Filter used in this lab follows the standard formulation presented in Probabilistic Robotics by Thrun, Burgard, and Fox (2005). The prediction and update steps follow::</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab10/1.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div> 
                            <p>In the class slides, the core pseudocode (algorithm flow) of the Bayes Filter is presented, as shown in the figure below:</p>

                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab10/2.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div> 
                            
                            <p>This figure is closely related to the functions I need to implement: <code>compute_control</code>, <code>odom_motion_model</code>, <code>prediction_step</code>, <code>sensor_model</code>, and <code>update_step</code>.</p>

                            <p>The following image is a snapshot of my notes, illustrating the connection between the pseudocode and the functions I need to implement.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab10/3.jpeg" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>     
                            <p>The following is the implementation code in detail</p>




                            <hr class="my-4"/>
                            <h2>Function Explanations</h2>
                          
                            <h3>compute_control()</h3>
                            <p>The purpose of this function is to determine <strong>how much the robot has moved</strong> and <strong>how it moved</strong>. It takes the current position and the previous position as input, and calculates the robot's motion as a combination of two rotations and one translation:</p>

                            <ul>
                              <li><strong>rot1</strong>: the initial rotation to align with the direction of motion,</li>
                              <li><strong>trans</strong>: the straight-line distance traveled,</li>
                              <li><strong>rot2</strong>: the final rotation to reach the desired orientation.</li>
                            </ul>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab10/4.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>   
                            <p><strong>Notes:</strong></p>
                            <ul>
                            <li>Add a special case check <code>if dx == 0 and dy == 0:</code> to prevent errors from <code>atan2(0, 0)</code>.</li>
                            <li>Use <code>normalize_angle()</code> to handle angle errors in <code>rot1</code> and <code>rot2</code>, in order to avoid incorrect large angle differences, such as mistaking 360° and 0° as a 360° error.</li>
                            </ul>


                          
                            <h3>odom_motion_model()</h3>
                            <p>This function is used to estimate <strong>how likely it is for the robot to move from one position to another</strong>. Given two positions and a control input (the expected motion), it uses a Gaussian distribution to compute the probability of this motion.</p>

                            <p>The assumption is that the robot's rotation and translation are not perfect — for example, it intends to rotate 30°, but ends up rotating only 28°. A Gaussian distribution is well-suited to model this kind of “close but with noise” behavior.</p>

                            <p>I also normalized the angles to avoid mistakes like treating 179° and -181° as a 360° difference, and used <code>max(..., 1e-9)</code> to prevent extremely small probabilities from collapsing the final product to zero.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab10/5.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>  
                            <p><strong>Notes:</strong></p>
                            <ul>
                            <li>All angle variables <code>rot1</code>, <code>rot2</code>, <code>rot1_hat</code>, and <code>rot2_hat</code> are passed through <code>normalize_angle()</code> to fix large error issues, such as when <code>rot1 ≈ -179°</code> and <code>rot1_hat ≈ +179°</code>.</li>
                            <li>Gaussian probabilities were previously unbounded below. Now all probabilities <code>p1</code>, <code>p2</code>, and <code>p3</code> are protected using <code>max(..., 1e-9)</code> to avoid zero values, which would cause the entire belief to collapse to zero and result in <code>NaN</code> issues.</li>
                            </ul>


                            <h3>prediction_step()</h3>
                            <p>This function answers the question: <strong>“Given where I was and how I moved, where am I most likely now?”</strong></p>

                            <p>It loops through all previous states and calculates: if I apply the current control input from that previous state, is it likely that I end up in the current state? If so, it multiplies this likelihood by the belief at the previous time step and adds it to the total.</p>

                            <p>To improve efficiency, I skip previous states with extremely low probabilities (less than <code>0.0001</code>). At the end, I normalize the total so that all probabilities sum up to 1. If, by any chance, the total is zero (e.g., due to a bug or a poor observation), I fall back to a uniform distribution as a safeguard.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab10/6.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>  
                            
                            <h3>sensor_model()</h3>
                            <p>This function answers the question: <strong>“How similar is the current laser observation at this position to the ideal observation from the map?”</strong></p>

                            <p>The robot rotates in place and scans distances in 18 directions. I compare each observed distance with the expected distance at this position on the map. If the values are close, it suggests that this position is a likely candidate for the robot’s current location.</p>

                            <p>To prevent a single poor match from making the entire probability drop to zero, I added a lower bound safeguard: each individual probability is protected using <code>max(prob, 1e-9)</code>.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab10/7.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>  
                            
                            <h3>update_step()</h3>
                            <p>This function combines the previous prediction with the current laser observation to update the final <code>belief</code>.</p>

                            <p>For each grid cell, it calculates: <strong>“If the robot were at this location, how likely would it be to receive the current observation?”</strong> This likelihood is then multiplied by the prior belief from the previous step.</p>
                            
                            <p>Once again, the resulting probabilities are normalized to ensure they form a valid probability distribution. If all values become zero (due to errors or poor matches), normalization is skipped to avoid division by zero.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab10/8.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>  

                            <h2>Result</h2>
                            <p>After implementing the above functions, I obtained the following trajectory plot:</p>

                            <ul>
                            <li><span style="color:red;"><strong>Red line</strong></span>: Odometry values</li>
                            <li><span style="color:green;"><strong>Green line</strong></span>: Ground truth positions</li>
                            <li><span style="color:blue;"><strong>Blue line</strong></span>: Bayes Filter localization results</li>
                            </ul>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab10/9.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>  
                            <p>The following video demonstrates the entire process of localization using my implementation:</p>

                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                        src="https://www.youtube.com/embed/YlOKssUn8kw"
                                        title="Funny Drift Bot"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                            </div>

                            <p>The following are the output results:</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4">
                                  <!-- 第一张图 -->
                                  <div class="col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab10/10.png" alt="Image 1" class="img-fluid rounded" style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                  <!-- 第二张图 -->
                                  <div class="col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab10/11.png" alt="Image 2" class="img-fluid rounded" style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                  <!-- 第三张图 -->
                                  <div class="col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab10/12.png" alt="Image 3" class="img-fluid rounded" style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                  <!-- 第四张图 -->
                                  <div class="col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab10/13.png" alt="Image 4" class="img-fluid rounded" style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                  <!-- 第五张图 -->
                                  <div class="col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab10/14.png" alt="Image 5" class="img-fluid rounded" style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                  <!-- 第六张图 -->
                                  <div class="col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab10/15.png" alt="Image 6" class="img-fluid rounded" style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                  <!-- 第七张图 -->
                                  <div class="col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab10/16.png" alt="Image 7" class="img-fluid rounded" style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                  <!-- 第八张图 -->
                                  <div class="col-md-6">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                      <img src="assets/img/lab10/17.png" alt="Image 8" class="img-fluid rounded" style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <p>From the output results, the localization system consistently maintained high accuracy. At almost every time step, both the predicted and updated <code>Bel index</code> remained very close to the <code>Ground Truth (GT index)</code>.</p>




                          
                            <h2>Conclusion</h2>
                            <p>This experiment successfully implemented a grid-based localization system using the Bayes Filter. The system is able to accurately estimate the robot's position by continuously reducing uncertainty through the fusion of odometry and laser observations during both translational and rotational movements.</p>

                          
 
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CLOSE</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Begin Lab 11 HTML Report Embed -->
        <div class="modal fade" id="lab11Modal" tabindex="-1" aria-labelledby="lab11ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content border-0 shadow">
                    <div class="modal-header bg-light">
                        <h5 class="modal-title fw-bold" id="lab7ModalLabel">Lab 11 Localization on the real robot</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
        
                    <div class="modal-body p-4" style="max-height: 80vh; overflow-y: auto;">
                        <div class="container-fluid">
                            <h2 class="text-center mb-4">Lab 11: Localization on the real robot</h2>
    
                            <h2>Objective</h2>
                            <p>The objective of this task was to perform a full 360-degree mapping scan using a mobile robot equipped with BLE communication and ToF sensors, and to process the raw measurements into usable distance and angle data for further localization or mapping.</p>
                            <hr class="my-4"/>
                            
                            <h2>Key Concepts</h2>
                            <ul>
                                <li>Used BLE to wirelessly control and collect sensor data from the robot</li>
                                <li>Each mapping scan produced 18 sets of 5 ToF distance readings (per angle)</li>
                                <li>Reference angles were normalized to the (-180°, 180°] range</li>
                                <li>ToF data was filtered to remove invalid values (e.g., zero) and the median was computed</li>
                                <li>Final outputs include both <strong>sensor_ranges</strong> (in meters) and <strong>sensor_bearings</strong> (in radians)</li>
                                <li>At each position, the predicted pose was computed using the Bayes Filter's belief grid output</li>
                                <li>The estimated pose was then compared to the manually recorded ground truth position</li>
                            </ul>
                            <hr class="my-4"/>
                            
                            <h2>Task 1: Test Localization in Simulation</h2>
                            <p>I obtained the localization results by running <strong>lab11_sim.ipynb</strong>. The results are as follows:</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab11/1.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>    
                            <p>From the results, we can see that the odometry is not perfect, but the <strong>belief obtained with the Bayes filter</strong> (blue) is very close to the <strong>ground truth</strong> (green).</p>

                            <hr class="my-4"/>
                            <h2>Task 2: Localization with the Bayes Filter on Actual Robot</h2>
                            <h3>Preparation</h3>
                                <p> In Lab 11, I needed the robot to rotate 18 times at 20-degree increments. This functionality was already implemented in Lab 9 Mapping. I only had to change the <strong>step_angle</strong> to 20 to meet the experiment requirements. (See the Lab 9 report for details.)</p>
                            <h3>Implementing perform_observation_loop</h3>
                            <p>I believe that in robot experiments, we often need to perform multiple tasks simultaneously, such as receiving sensor data (e.g., ToF distance), controlling motor movement or steering, sending/receiving commands via BLE, and performing real-time computations (like PID control). </p>
                             <p>   Therefore, <strong>coroutines</strong> are highly suitable for real-time control and multitasking coordination in this lab — they allow non-blocking waits, prevent the main flow from stalling, and enable smarter handling of interactions between sensors and control logic.</p>
                            <p> Based on the Lab 11 tutorial (<a href="https://fastrobotscornell.github.io/FastRobots-2025/labs/Lab11.html" target="_blank">Lab 11: Localization</a>), I implemented <strong>perform_observation_loop</strong> using coroutines. The complete code is shown below:</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <!-- 第一张图 -->
                                    <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                            <img src="assets/img/lab11/2.png" 
                                                 alt="Observation Result 1" 
                                                 class="img-fluid rounded" 
                                                 style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                    </div>
                            
                                    <!-- 第二张图 -->
                                    <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                            <img src="assets/img/lab11/3.png" 
                                                 alt="Observation Result 2" 
                                                 class="img-fluid rounded" 
                                                 style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p>The above is my final version of the complete code, which differs significantly from my initial implementation. At first, the results from my Bayes filter were extremely inaccurate. Through continuous debugging and modifying the code, I was able to achieve much better results.</p>

                            <p>I will share my full debugging process below, in hopes that it will help others facing similar issues with Bayes filter prediction accuracy.</p>

                            
                            <h3>Debugging Process: Based on (5,-3)</h3>
                            <p>Since my Lab 9 implementation worked very well, I initially thought Lab 11 would be easy for me. The success of the previous PID control experiments also gave me confidence that my sensors were functioning correctly.</p>

                            <p>Below is a video of my first test at position <strong>(5, -3)</strong>:</p>
                            <div class="mx-auto" style="max-width: 600px;">
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe
                                        src="https://www.youtube.com/embed/8P4WOiYbaME"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                            <p>From the video, we can see that my robot's rotation performance was quite good (at least in my opinion). I also successfully collected ToF data from 18 different angles, with 5 measurements for each angle.</p>
                            <p>In addition, I followed the angle convention where the positive x-axis is set as <strong>0 degrees</strong>, and the robot rotates <strong>counterclockwise up to 360 degrees</strong>. This is illustrated in the image below (originally shared by <strong>Aidan McNay</strong> on Ed Discussion — thanks to Aidan for the clear diagram):</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                            <!-- 去掉 max-height，改为 width: 100% -->
                                            <img src="assets/img/lab11/4.png" 
                                                 alt="Artemis and IMU" 
                                                 class="img-fluid rounded" 
                                                 style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                        <!-- 图注 -->
                                        <p class="text-center mt-2" style="font-size: 0.9rem; color: #666;">Figure credit: Aidan McNay</p>
                                    </div>
                                </div>
                            </div>
                            
                            <p>Originally, I believed that with this setup, the Bayes filter would allow me to accurately predict the robot's position and complete the experiment smoothly. However, the results were disappointing.</p>

                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab11/5.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>    
                            <p>As shown in the figure above, there was a significant gap between my prediction and the ground truth, so I began the debugging process.</p>
                            
                            
                            <h4>Debug 1: Adjusting the Angle Range</h4>
                            <p>First, TA <strong>Cameron</strong> informed me that the robot’s rotation angle range should be <strong>(-180, 180]</strong> instead of <strong>[0, 360)</strong>. I found this reasonable, because in the IMU lab, I recalled that the angle would suddenly jump from 180° to -179° during rotation. So, I modified my code accordingly, as shown in the figure below:</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab11/6.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>    
                            <p>However, even after adjusting the angle range, the prediction was still inaccurate, indicating that the problem lay elsewhere.</p>

                            <h4>Debug 2: Was the ToF Sensor Affected by Interference?</h4>
                            <p>I suspected that my ToF sensor might have been affected by interference because in his report, <strong>Steven Sun</strong> mentioned: “Also, the sensors might have periodically, sensed the ground instead of the world walls, making it think it’s in a more constrained position than it actually is.” (<a href="https://sts200.github.io/posts/Lab11/" target="_blank">Source Link</a>).</p>

                            <p>This idea was reinforced by some of my own ToF readings, such as: <strong>Ref Angle: -120.0, ToF: 10.0, 788.0, 788.0, 789.0, 0.0</strong>, which clearly suggested abnormal or unstable measurements.</p>
                            
                            <p>To address this, I increased the time interval between each angle’s ToF readings (I set it to <strong>2</strong> seconds), and added a <strong>0.2-second delay</strong> before recording each ToF value. This made the data collection process more stable and reliable.</p>
                            
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab11/7.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>    

                            <p>Additionally, TA <strong>Cameron</strong> noticed that the positioning sticker at point <strong>(0, 0)</strong> was slightly raised. To ensure more accurate localization, he reattached the sticker properly.</p>


                            <p>After the adjustments above, my current ToF readings are shown in the figure below:</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab11/8.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>    
                            <p>As we can see, the data is quite stable. However, the localization results were still not very accurate. This suggests that while I resolved the sensor interference issue, the main problem likely lies elsewhere.</p>

                            <h4>Debug 3: Modifying Sensor Data Calculation and Adding Angle Offset</h4>
                            <p>After all the previous debugging steps, the prediction was still inaccurate. I began to suspect that there might be an issue with the orientation of the sensor data. To investigate further, I decided to plot <strong>polar plots</strong> to help identify the problem.</p>
                            <p>The polar plots below show the sensor readings at position <strong>(5, -3)</strong>:</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab11/9.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>   
                            <p>It is clear that the contour at <strong>(5, -3)</strong> is generally correct, but the entire plot is rotated <strong>clockwise by about 30 degrees</strong>. Therefore, I added this angle offset in my code to correct the orientation.</p>
                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                                    <!-- 第一张图 -->
                                    <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                            <img src="assets/img/lab11/10.png" 
                                                 alt="Observation Result 1" 
                                                 class="img-fluid rounded" 
                                                 style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                    </div>
                            
                                    <!-- 第二张图 -->
                                    <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                            <img src="assets/img/lab11/11.png" 
                                                 alt="Observation Result 2" 
                                                 class="img-fluid rounded" 
                                                 style="width: 100%; height: auto; object-fit: contain;">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <p>Additionally, I noticed that the ToF sensor readings occasionally included <strong>0 values</strong>, which are clearly invalid. To address this, I added a constraint in the <strong>data_received_handler</strong> function to ensure that the <strong>ToF array only stores values greater than 0</strong>.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab11/12.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>   

                            <p>More importantly, TA <strong>Cameron</strong> pointed out that in my code, I was calculating the final ToF distance using the <strong>average</strong> of the 5 readings. This was highly unreliable, as even a single inaccurate reading could significantly distort the result.</p>

                            <p>Therefore, in my latest version of the code, I switched to using the <strong>median</strong> value instead, which is much more robust against outliers and noise in the sensor data.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab11/13.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div>   
                            <p>Additionally, to ensure that both the final ToF sensor data and the corresponding angle data were correctly passed into the Bayes Filter pipeline, I added a <strong>print</strong> statement inside the <strong>get_observation_data</strong> function in <strong>localization.py</strong>. This allowed me to confirm that the data was indeed being transmitted into the filtering process.</p>
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab11/14.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div> 
                            <div class="container my-4">
                                <!-- 图片区容器 -->
                                <div class="row g-4 justify-content-center">
                                    <!-- 让列占满全宽 -->
                                    <div class="col-md-8">
                                    <div class="p-3 border rounded shadow-sm bg-white h-100 d-flex align-items-center justify-content-center">
                                        <!-- 去掉 max-height，改为 width: 100% -->
                                        <img src="assets/img/lab11/15.png" 
                                            alt="Artemis and IMU" 
                                            class="img-fluid rounded" 
                                            style="width: 100%; height: auto; object-fit: contain;">
                                    </div>
                                    </div>
                                </div>
                            </div> 
                            <p>It was clear from the print output that the data was indeed passed in correctly. Also, since I had previously set a <strong>30-degree offset</strong>, the first angle value appeared as <strong>0.523</strong> (in radians).</p>
                            <p>After all the debugging efforts above, my final prediction results improved significantly compared to the initial attempts.</p>
                            
                            <hr class="my-4"/>
                            <h2>Result</h2>
                            <p>After the debugging steps above, the final result is shown in the figure below:</p>

                            <div class="container my-4">
                                <div class="row g-4 justify-content-center">
                            
                                    <!-- 图1 -->
                                    <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white">
                                            <img src="assets/img/lab11/16.png" 
                                                 alt="Result 1" 
                                                 class="img-fluid rounded" 
                                                 style="width: 100%; height: auto; object-fit: contain;">
                                            <p class="text-center mt-2" style="font-weight: bold;">Result at Position (-3, -2)</p>
                                        </div>
                                    </div>
                            
                                    <!-- 图2 -->
                                    <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white">
                                            <img src="assets/img/lab11/17.png" 
                                                 alt="Result 2" 
                                                 class="img-fluid rounded" 
                                                 style="width: 100%; height: auto; object-fit: contain;">
                                            <p class="text-center mt-2" style="font-weight: bold;">Result at Position (5, -3)</p>
                                        </div>
                                    </div>
                            
                                    <!-- 图3 -->
                                    <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white">
                                            <img src="assets/img/lab11/18.png" 
                                                 alt="Result 3" 
                                                 class="img-fluid rounded" 
                                                 style="width: 100%; height: auto; object-fit: contain;">
                                            <p class="text-center mt-2" style="font-weight: bold;">Result at Position (0, 3)</p>
                                        </div>
                                    </div>
                            
                                    <!-- 图4 -->
                                    <div class="col-md-8">
                                        <div class="p-3 border rounded shadow-sm bg-white">
                                            <img src="assets/img/lab11/19.png" 
                                                 alt="Result 4" 
                                                 class="img-fluid rounded" 
                                                 style="width: 100%; height: auto; object-fit: contain;">
                                            <p class="text-center mt-2" style="font-weight: bold;">Result at Position (5, 3)</p>
                                        </div>
                                    </div>
                            
                                </div>
                            </div>
                            

                        <p>As we can see, the predicted position is much closer to the ground truth, indicating that the stability and accuracy of the ToF data, as well as the robot’s rotation angle, have a significant impact on prediction performance.</p>

                        <p>In particular, the result at position <strong>(-3, -2)</strong> shows high accuracy. This is likely because the position is located within a semi-enclosed space, where most ToF measurements are short-range and stable, making localization easier. In contrast, more open positions require the ToF sensor to detect distant walls, which increases the likelihood of inaccurate readings and therefore reduces prediction accuracy.</p>

                        <p>The following video was recorded during my testing process:</p>
                        <div class="mx-auto" style="max-width: 600px;">
                            <div class="ratio ratio-16x9 mb-3">
                                <iframe
                                    src="https://www.youtube.com/embed/XRvp4VKW1bs"
                                    allowfullscreen>
                                </iframe>
                            </div>
                        </div>

                        <hr class="my-4"/>
                        <h2>Acknowledgments</h2>
                        <p>Special thanks to TA <strong>Cameron</strong> for his guidance and support throughout my debugging process.</p>
                        
                        <p>Thanks to <strong>Aidan McNay</strong> for the helpful image he shared on Ed, which clarified the robot's forward direction and rotation reference.</p>
                        
                        <p>Appreciation also goes to <strong>Steven Sun</strong>, whose report made me consider the possibility that the sensor might sometimes detect the ground instead of the walls.</p>
                                             
    
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CLOSE</button>
                    </div>
                </div>
            </div>
        </div>

        

        <!-- 使用Bootstrap 5.x为例 -->
        <div class="modal fade" id="labModal" tabindex="-1" aria-labelledby="lab1ModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content border-0 shadow">

                    <!-- Modal 头部 -->
                    <div class="modal-header bg-light">
                        <h5 class="modal-title fw-bold" id="lab1ModalLabel">Lab 1 Report</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <!-- Modal 主体：通过 p-4 增加内边距，max-height: 80vh 和 overflow-y: auto 用于可滚动 -->
                    <div class="modal-body p-4" style="max-height: 80vh; overflow-y: auto;">

                        <!-- 可以在内部再包一层容器，便于统一排版 -->
                        <div class="container-fluid">

                            <!-- 第一节：简介 -->
                            <h2 class="text-center mb-4">Lab 1A: The Artemis board and Bluetooth</h2>
                            <p class="text-justify">
                                The main goal of LAB 1A is to set up and familiarize myself with the Arduino IDE and the Artemis development board.
                            </p>
                            <p class="text-justify">
                                In <strong>Lab 1A</strong>, I programmed the development board, experimented with controlling the onboard LED, read and wrote serial messages via USB, and utilized the onboard temperature sensor and pulse density microphone. Additionally, I completed the additional tasks for 5000-level students.
                            </p>

                            <!-- 图片示例区域 -->
                            <div class="my-4 p-3 border rounded bg-light">
                                <div class="row g-3 justify-content-center">
                                    <div class="col-md-4">
                                        <img src="assets/img/lab1/ArtemisNano.png"
                                            alt="Artemis Nano" 
                                            class="img-fluid mb-3 rounded shadow"/>
                                    </div>
                                    <div class="col-md-4">
                                        <img src="assets/img/lab1/USB.png" 
                                            alt="USB" 
                                            class="img-fluid mb-3 rounded shadow"/>
                                    </div>
                                </div>
                                <p class="text-center mb-0">
                                    上图展示了实验平台的初步搭建情况。可以看到核心处理器、动力驱动以及基本传感器都已安装完毕。
                                </p>
                            </div>

                            <hr class="my-4"/><!-- 分割线 -->

                            <!-- 第二节：硬件介绍 -->
                            <h2>2. 硬件系统 (Hardware Overview)</h2>
                            <p>
                                实验使用了以下硬件设备：
                            </p>
                            <ul>
                                <li>微控制器 (MCU)：STM32F4 Discovery 或相同级别嵌入式开发板</li>
                                <li>传感器：IMU（陀螺仪+加速度计）、超声波测距模块等</li>
                                <li>电机 & 驱动器：高速无刷电机 + 驱动板</li>
                                <li>电源系统：电池、稳压模块</li>
                            </ul>

                            <p>
                                以下是一张表格示例，用来列出关键硬件参数（仅作为示例）：
                            </p>

                            <!-- 表格示例 -->
                            <div class="table-responsive">
                                <table class="table table-bordered align-middle">
                                    <thead class="table-light">
                                        <tr>
                                            <th>硬件名称</th>
                                            <th>型号</th>
                                            <th>主要参数</th>
                                            <th>备注</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>MCU</td>
                                            <td>STM32F407</td>
                                            <td>168 MHz CPU, 1 MB Flash, 192 KB SRAM</td>
                                            <td>主控核心</td>
                                        </tr>
                                        <tr>
                                            <td>IMU</td>
                                            <td>MPU-6050</td>
                                            <td>3轴加速度计 + 3轴陀螺仪</td>
                                            <td>I2C 接口</td>
                                        </tr>
                                        <tr>
                                            <td>电机</td>
                                            <td>BLDC-2205</td>
                                            <td>KV = 2300, 3 相无刷</td>
                                            <td>驱动轮</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <hr class="my-4"/><!-- 分割线 -->

                            <!-- 第三节：软件流程 (Software Flow) -->
                            <h2>3. 软件流程 (Software Flow)</h2>
                            <p>
                                控制流程可以分为初始化、传感器读取、控制算法和输出执行四部分。下图是流程图示意：
                            </p>
                            <img src="assets/img/software_flow.png" alt="Software Flow Diagram" class="img-fluid d-block mx-auto mb-3"/>
                            <p>
                                - 初始化：设置串口、I2C、PWM 等外设  
                                - 读取传感器：定时查询 IMU 和距离传感器  
                                - 控制算法：根据期望速度或姿态，计算电机输出  
                                - 输出执行：通过 PWM 信号给电机驱动器
                            </p>

                            <hr class="my-4"/><!-- 分割线 -->

                            <!-- 第四节：实验过程与视频演示 -->
                            <h2>4. 实验过程与视频演示</h2>
                            <p>
                                在本实验中，我们进行了多次测试，包括速度提升测试、转弯半径测试等。以下是嵌入的 YouTube 视频演示（示例链接）：
                            </p>

                            <!-- YouTube 视频 iframe 示例 -->
                            <div class="ratio ratio-16x9 mb-3">
                                <iframe 
                                    src="https://www.youtube.com/embed/VIDEO_ID" 
                                    title="YouTube video" 
                                    allowfullscreen>
                                </iframe>
                            </div>

                            <p>
                                如果你想嵌入 Google Drive 视频，也可以使用类似的方式（以下示例）：
                            </p>

                            <!-- Google Drive 视频 iframe 示例 (需有效 FILE_ID) -->
                            <div class="ratio ratio-16x9 mb-3">
                                <iframe 
                                    src="https://drive.google.com/file/d/FILE_ID/preview" 
                                    allow="autoplay"
                                    allowfullscreen>
                                </iframe>
                            </div>

                            <p>
                                我们在测试过程中发现，当速度超过一定阈值时，传感器读数与控制输出之间的时延开始对系统稳定性产生显著影响，具体表现为车身抖动和轨迹偏移。通过在中断中优先处理 IMU 数据，并适当增大控制循环频率，可以在一定程度上减轻此影响。
                            </p>
                            <p>
                                <strong>安全注意事项：</strong> 在高速测试时，必须保证周围无障碍物或其他人员干扰，并且为车辆加装保护框，防止意外碰撞。
                            </p>

                            <hr class="my-4"/><!-- 分割线 -->

                            <!-- 第五节：结果分析 (Results & Analysis) -->
                            <h2>5. 结果分析 (Results & Analysis)</h2>
                            <p>
                                从实验结果来看，系统在高速下依然可以保持较好的姿态控制，但精确的速度控制会受到传感器噪声和环境因素影响。下面列出一些关键指标：
                            </p>
                            <ul>
                                <li>最大稳定速度：3.5 m/s</li>
                                <li>转弯半径最小值：1.2 m</li>
                                <li>控制延迟：平均 5 ms</li>
                                <li>IMU 测量频率：200 Hz</li>
                            </ul>

                            <hr class="my-4"/><!-- 分割线 -->

                            <!-- 第六节：结论与未来工作 -->
                            <h2>6. 结论 (Conclusion & Future Work)</h2>
                            <p>
                                根据以上测试，我们得出如下结论：
                            </p>
                            <ol>
                                <li>高速状态下的实时传感器读取与低延迟执行是保证稳定控制的关键；</li>
                                <li>对噪声的滤波和预测性控制算法对于减缓轨迹抖动非常重要；</li>
                                <li>优化硬件布线和延迟可以显著改善控制性能。</li>
                            </ol>
                            <p>
                                <strong>未来工作（Future Work）：</strong>
                            </p>
                            <ul>
                                <li>集成更高精度的定位系统（例如视觉SLAM 或激光雷达）；</li>
                                <li>进一步优化控制算法，如模型预测控制（MPC）或强化学习；</li>
                                <li>在真实复杂场景下进行更广泛的速度与环境测试。</li>
                            </ul>

                            <hr class="my-4"/><!-- 分割线 -->

                            <!-- 第七节：参考文献 -->
                            <h2>7. 参考文献 (References)</h2>
                            <p>
                                [1] Fast Robots Course Material, Cornell University (2025) <br/>
                                [2] 《现代控制理论与应用》, 某某出版社, 2022 <br/>
                                [3] <a href="https://github.com/xyz/fast-robot-resources" target="_blank">GitHub: fast-robot-resources</a>
                            </p>
                            
                        </div><!-- /container-fluid -->
                    </div><!-- /modal-body -->

                    <!-- Modal 底部 -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">CLOSE</button>
                    </div>

                </div><!-- /modal-content -->
            </div><!-- /modal-dialog -->
        </div><!-- /modal -->


  
        </section>
        <!-- Footer-->
        <footer class="bg-light py-5">
            <div class="container px-4 px-lg-5 text-center">
              <small class="text-muted">
                Powered by 
                <a href="https://startbootstrap.com/theme/creative" target="_blank">Start Bootstrap - Creative</a>
              </small>
            </div>
          </footer>     
          

          
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- SimpleLightbox plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>

    </body>
</html>
